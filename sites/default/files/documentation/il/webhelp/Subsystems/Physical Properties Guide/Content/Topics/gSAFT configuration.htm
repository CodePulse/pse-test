<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-gb" xml:lang="en-gb" data-mc-search-type="Stem" data-mc-help-system-file-name="Physical Properties Guide.xml" data-mc-path-to-help-system="../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Physical Properties Guide|Using Physical Properties for Simple Materials|The gSAFT physical properties interface">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>gSAFT Configuration</title>
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../Resources/Stylesheets/GeneralStyles.css" rel="stylesheet" />
        <script src="../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../Physical Properties Guide.htm#Topics/gSAFT configuration.htm">Open topic with navigation</a>
        </p>
        <div>
            <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix">You are here: </span><a class="MCBreadcrumbsLink" href="c251.html">Physical Properties Guide</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="c257.html">Using Physical Properties for Simple Materials</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="gSAFT introduction.htm">The gSAFT physical properties interface</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">Configuration</span>
            </div>
        </div>
        <h1>gSAFT Configuration</h1>
        <p>The gSAFT foreign object must be configured using the following general form where the equation of state (EOS) and the components are specified. </p><pre class="programlisting">gSAFT::databank.dtb&lt;component1,component2,component3,...&gt;</pre>
        <p>gSAFT comes with two separate databanks, one for each EOS. The EOS is selected by specifying the databank to use:</p>
        <ul style="list-style-type: disc;margin-left: 36pt;">
            <li style="list-style-type: disc;" value="1"><span class="fileName">VR_SW_databank.dtb</span> for SAFT-VR SW and</li>
        </ul>
        <ul style="list-style-type: disc;margin-left: 36pt;">
            <li style="list-style-type: disc;" value="1"><span class="fileName">GC_Mie_databank.dtb</span> for SAFT-γ Mie.</li>
        </ul>
        <p>The components are specified in a comma-separated list within angle brackets (and without spaces) as shown in the example below.</p><pre class="programlisting">gSAFT::VR_SW_databank.dtb&lt;hydrogen_fluoride,water&gt;</pre>
        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" />Defining components in terms of functional groups</a></span>
            <div class="MCDropDownBody dropDownBody">
                <p>When SAFT-<span style="font-family: Symbol;">g</span> Mie is used, it is possible to define a component in terms of functional groups. This component does not need to exist in the gSAFT databank. The example (below) is a binary mixture of water with polyethylene glycol (PEG). In this example the user can define a component of arbitrary name (here “PEG”), and the group decomposition of the component is given inside parentheses as follows:</p><pre class="programlisting">gSAFT::databank.dtb&lt;water,PEG (CH2:=360;cO:=179;OH:=2)&gt;</pre>
                <p>Note that the group multiplicity is declared with the assignment operator “:=”, and each group type is separated by a semicolon. All the available group types are reported in the SAFT-<span style="font-family: Symbol;">g</span><span style="font-family: Symbol;">&#160;</span>Mie group list in section 2.</p>
            </div>
        </div>
        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" />Variable molecular structure components (VMSC)</a></span>
            <div class="MCDropDownBody dropDownBody">
                <p>The gSAFT physical property package offers the possibility of defining a component with a variable molecular structure. This means that the number of functional group units in this component (or group multiplicity) does not need to be known in advance, but can be considered as a variable of the gPROMS model. This is a particularly useful feature in the context of solvent design but also for more routine use, for example, in polymerization reactor modelling.</p>
                <p>In order to define a VMSC, the idea is to simply remove the group multiplicity specification of a given group in a molecule as follows:</p><pre class="programlisting">gSAFT::databank.dtb&lt;ethylene,alkane (CH2;CH3:=2)&gt;</pre>
                <p>In this example, the molecule “alkane” is automatically recognized to be a VMSC, and the CH2 group multiplicity will have to be evaluated at “runtime” by a gPROMS model. Note that there is no restriction to the number of group types with unspecified multiplicity in the same component.</p>
                <p>If at least one VMSC is present in a mixture, then the group multiplicities of all VMSCs need to be passed by argument to the physical property methods. This extra argument is an array specifying the multiplicity (of type real) of all group types (in each component) that were left unspecified in the gSAFT configuration.</p>
                <p>An example of a simple gPROMS Model making use of the VMSC feature is shown below:</p>
                <p>
                    <img src="../Resources/Images/gSAFT_3.1.0_documentation2/gSAFT Configuration.png" style="visibility: visible;mso-wrap-style: square;width: 602px;height: 400px;" />
                </p>
                <p>In this example, the components “alkane” and “branchedalkane” are both VMSCs. The important lines of the Model that are specific to the variable molecular structure feature are explained below: </p>
                <ul>
                    <li value="1">At line 19, the list of relevant group types for each VMSC in the mixture is returned in the form of an ordered set by the method “MolecularStructure”. This ordered set is stored in the parameter “GroupsInMolecule”. In this particular example, the CH3, CH2 and CH groups in “branchedalkane” as well as the CH2 group in “alkane” have been left unspecified in the gSAFT configuration (see line 17). Therefore the method “MolecularStructure” will return the ordered set [“branchedalkane:CH3”, “branchedalkane:CH2”, “branchedalkane:CH”, “alkane:CH2”]. Note that each entry of the ordered set is composed of the name of a VMSC together with a group type that is part of the VMSC.</li>
                    <li value="2">At line 13, the variable “MolecularStructure” is defined, and is used to store the group multiplicities (real values) of all the groups specified in the ordered set “GroupsInMolecule”.</li>
                    <li value="3">At lines 22, 23, 24 and 26, the array elements of “MolecularStructure” are given real values by means of simple equations involving some intermediate variables, “NumberOfCH3, “NumberOfCH2” and “NumberOfCH”. Since these variables are free to vary during the simulation, it can be seen that the molecular structure of “alkane” and “branchedalkane” will change at runtime.</li>
                    <li value="4">At line 28, the physical property call requires the use of an extra argument (here named “MolecularStructure”) that contains all of the group multiplicities of all group types in the VMSC that were not specified in the gSAFT configuration string (see gSAFT configuration string at line 17). Note that as soon as at least one VMSC in the gSAFT configuration is defined, all of the physical property methods should be invoked with this extra argument.</li>
                </ul>
                <p>This simple example above shows how to setup a gPROMS Model that makes use of the VMSC feature of gSAFT. Only two components were declared as a VMSC in this specific example. There is however no limitation on the number of VMSCs that can be configured in the gSAFT initialization string.</p>
            </div>
        </div>
        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" />Switching from molar to mass basis calculations</a></span>
            <div class="MCDropDownBody dropDownBody">
                <p>By default gSAFT works on a molar basis. Switching the calculations to mass basis is as simple as adding an additional parameter at the end of the initialisation string as shown here:</p><pre class="programlisting">gSAFT::VR_SW_databank.dtb&lt;hydrogen_fluoride,water&gt; -mass</pre>
            </div>
        </div>
        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" />Selecting the enthalpy and entropy reference datum</a></span>
            <div class="MCDropDownBody dropDownBody">
                <p>The enthalpy and entropy can be calculated with respect to two different reference values, namely the compound and element references. </p>
                <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" />Compound reference</a></span>
                    <div class="MCDropDownBody dropDownBody">
                        <p>This compound reference is the default option in gSAFT. This means that the ideal gas enthalpy and entropy of each pure component in the mixture is set to zero at T=298.15 K. The total enthalpy and entropy are then computed by thermodynamic integration from the ideal gas state.</p>
                    </div>
                </div>
                <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" />Element reference</a></span>
                    <div class="MCDropDownBody dropDownBody">
                        <p>The element reference can be selected by the addition of a parameter at the end of the gSAFT initialization string as shown here:</p><pre class="programlisting">gSAFT::VR_SW_databank.dtb&lt;hydrogen_fluoride,water&gt; -datum element</pre>
                        <p>The datum for the system of interest is then considered to be the chemical elements in their thermodynamic reference state at T= 298.15 K and P = 1 bar. This means that the ideal gas enthalpy and entropy of each pure component in the system is equal to their respective enthalpy and entropy of formation in the ideal gas state at T=298.15 K (instead of being equal to zero with the compound reference).</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" />Disabling the exponential transformation</a></span>
            <div class="MCDropDownBody dropDownBody">
                <p>The exponential transformation (default behaviour) prevents the sending of negative values to the gSAFT foreign object as inputs for calculations and performs a smooth transformation which modifies very small and/or negative values to positive values. </p>
                <p>This transformation of the inputs can be disabled with the following flag:</p><pre class="programlisting">gSAFT::VR_SW_databank.dtb&lt;hydrogen_fluoride,water&gt; -noexptransform </pre>
                <p>Disabling this transformation is recommended if the composition of a compound needs to be set to (exactly) zero. If the exponential transformation is not disabled, the composition of the compound would become a small positive number, and hence create possible adverse effects, such as the appearance of a new phase.</p>
            </div>
        </div>
        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" />Disabling the analytical derivatives of the physical property methods</a></span>
            <div class="MCDropDownBody dropDownBody">
                <p>It is possible to disable all of the analytical derivatives that the gSAFT foreign object computes. This is done by adding an extra flag as follows:</p><pre class="programlisting"> gSAFT::VR_SW_databank.dtb&lt;hydrogen_fluoride,water&gt; -noderiv </pre>
            </div>
        </div>
        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" />Configuring gSAFT from a unit specification dialog</a></span>
            <div class="MCDropDownBody dropDownBody">
                <p>The specification string can be entered either directly into the gPROMS language of a gPROMS&#160;model</p><pre class="programlisting">SET
...
 physProps := "gSAFT::VR_SW_databank.dtb&lt;hydrogen_fluoride,water&gt;";
...</pre>
                <p>or in a unit specification dialog on a topology. </p>
                <div class="figure">
                    <p>
                        <img src="../Resources/Images/gSAFT_3.1.0_documentation2/gSAFT Configuration_1.png" style="visibility: visible;mso-wrap-style: square;width: 417px;height: 377px;" />
                    </p>
                    <p class="FigureCaption">Physical property specification </p>
                </div>
                <p>Once the specification string has been entered, the names of the components will immediately be accessible as labels to other specification fields<a href="javascript:void(0);" class="MCTextPopup popup popupHead" style="font-size: 0.9em; vertical-align: super">1<span class="MCTextPopupBody MCTextPopupBody_Closed needs-pie popupBody"><span class="MCTextPopupArrow"></span>This behaviour is not specific to gSAFT but applies to physical property packages in general.</span></a>.</p>
            </div>
        </div>
        <div>
            <p class="Footer">&#160;</p>
            <p class="Footer">&#160;</p>
            <hr width="100%" size="0" align="center" />
            <p class="Footer">Commercial in confidence</p>
            <p class="Footer">© 2016 Process Systems Enterprise Limited</p>
        </div>
    </body>
</html>