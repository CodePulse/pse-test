<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-gb" xml:lang="en-gb" data-mc-search-type="Stem" data-mc-help-system-file-name="Model Developer Guide.xml" data-mc-path-to-help-system="../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Custom Modelling in gPROMS|Distributed Models">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Defining Distributed Equations</title>
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../Resources/Stylesheets/GeneralStyles.css" rel="stylesheet" />
        <link href="../Resources/TableStyles/GeneralTable.css" rel="stylesheet" />
        <script src="../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../Model Developer Guide.htm#Topics/x2121.html">Open topic with navigation</a>
        </p>
        <div>
            <div class="nocontent">
                <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="5" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                </div>
            </div>
        </div>
        <h1><a name="md_distributed_equations"></a>Defining Distributed Equations</h1>
        <p>As with lumped models, Distributed Variables in Models are related through sets of equations that are declared in the Equation section. For
 example, consider the following declarations within a Model of a tubular reactor:</p><pre class="programlisting"># MODEL TubularReactor

 PARAMETER

 # Geometrical parameters
 ReactorRadius,
 ReactorLength AS REAL

 # Heat transfer parameters
 U, S AS REAL

 ...

 DISTRIBUTION_DOMAIN
 Axial AS [ 0 : ReactorLength ]
 Radial AS [ 0 : ReactorRadius ]

 VARIABLES
 Vz, Vr AS DISTRIBUTION (Axial, Radial) OF Velocity
 T AS DISTRIBUTION (Axial, Radial) OF Temperature
 Twall AS DISTRIBUTION (Axial) OF Temperature
 Tc AS Temperature</pre>
        <p>In this case, <code class="methodname">Vz * T</code> is a valid expression that is distributed over the entire <code class="methodname">Axial</code> and
    <code class="methodname">Radial</code> domains. Similarly,</p><pre class="programlisting">U * S * ( T(,ReactorRadius) - Tc ) </pre>
        <p>is also a valid expression distributed over the entire <code class="methodname">Axial</code> domain. In some cases, it may be desired to define an
 expression over <i class="emphasis">part </i>of a particular domain. This can be achieved by using <i class="emphasis">slices</i> of distributions, very
 similar to the slice concept for <a href="c1185.html">arrays</a>. For example, the expression:</p><pre class="programlisting">Vz(0:ReactorLength/2, ) * T(0:ReactorLength/2, )</pre>
        <p>is distributed over the first half of the <code class="methodname">Axial</code> domain and the entire <code class="methodname">Radial</code> domain. The
 mathematical modelling of distributed systems often requires a rather subtle distinction between the entire domain <i class="emphasis">including</i>
    its boundaries, and the domain <i class="emphasis">excluding</i> all or part of its boundaries. In standard mathematical terminology, these two kinds
 of domain are referred to as 'closed' and 'open' respectively. One major reason for introducing this distinction is that some of the equations
 (e.g. conservation laws) may hold only in the interior of a domain while being replaced by appropriate <a href="x2549.html">boundary
 conditions</a> on the domain boundaries. To allow the modellers to make the above distinction, gPROMS employs the notation shown in the table
 below.</p>
        <div class="table"><a name="AEN2142"></a>
            <table style="mc-table-style: url('../Resources/TableStyles/GeneralTable.css');margin-left: auto;margin-right: auto;" class="TableStyle-GeneralTable" cellspacing="0">
                <caption>Closed and open domain notation</caption>
                <thead>
                    <tr class="TableStyle-GeneralTable-Head-Header1">
                        <th align="center" class="TableStyle-GeneralTable-HeadE-Column1-Header1">Mathematical notation</th>
                        <th align="center" class="TableStyle-GeneralTable-HeadE-Column1-Header1">Interpretation</th>
                        <th align="center" class="TableStyle-GeneralTable-HeadD-Column1-Header1">gPROMS notation</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="TableStyle-GeneralTable-Body-Body1">
                        <td class="TableStyle-GeneralTable-BodyE-Column1-Body1">[a,b]</td>
                        <td class="TableStyle-GeneralTable-BodyE-Column1-Body1"><span class="inlinemediaobject"><img src="../Resources/Images/inlineqn_zinabeqzb.png" data-mc-conditions="Default.ScreenOnly" /></span>
                        </td>
                        <td class="TableStyle-GeneralTable-BodyD-Column1-Body1"><code class="methodname">a : b </code>
                        </td>
                    </tr>
                    <tr class="TableStyle-GeneralTable-Body-Body2">
                        <td class="TableStyle-GeneralTable-BodyE-Column1-Body2">(a,b]</td>
                        <td class="TableStyle-GeneralTable-BodyE-Column1-Body2"><span class="inlinemediaobject"><img src="../Resources/Images/inlineqn_zinabltzeqb.png" data-mc-conditions="Default.ScreenOnly" /></span>
                        </td>
                        <td class="TableStyle-GeneralTable-BodyD-Column1-Body2"><code class="methodname">a|+ : b </code>
                        </td>
                    </tr>
                    <tr class="TableStyle-GeneralTable-Body-Body1">
                        <td class="TableStyle-GeneralTable-BodyE-Column1-Body1">[a,b)</td>
                        <td class="TableStyle-GeneralTable-BodyE-Column1-Body1"><span class="inlinemediaobject"><img src="../Resources/Images/inlineqn_zinablteqzltb.png" data-mc-conditions="Default.ScreenOnly" /></span>
                        </td>
                        <td class="TableStyle-GeneralTable-BodyD-Column1-Body1"><code class="methodname">a : b|-</code>
                        </td>
                    </tr>
                    <tr class="TableStyle-GeneralTable-Body-Body2">
                        <td class="TableStyle-GeneralTable-BodyB-Column1-Body2">(a,b)</td>
                        <td class="TableStyle-GeneralTable-BodyB-Column1-Body2"><span class="inlinemediaobject"><img src="../Resources/Images/inlineqn_zinabltltzltb.png" data-mc-conditions="Default.ScreenOnly" /></span>
                        </td>
                        <td class="TableStyle-GeneralTable-BodyA-Column1-Body2"><code class="methodname">a|+ : b|-</code>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <p>Thus, the Variable slice <code class="methodname">Vz(0|+:ReactorLength, 0|+:ReactorRadius|-)</code> denotes the values <i class="emphasis">Vz(z,r)</i>
    for the values of <i class="emphasis">z</i> and <i class="emphasis">r</i> satisfying 0 &lt; z &lt;= <code class="methodname">ReactorLength</code> and 0 &lt; r
 &lt; <code class="methodname">ReactorRadius</code>. We conclude by formally defining the validity of expressions involving distributed Variables.
 Consider an expression x ? y where <i class="emphasis">x</i> and <i class="emphasis">y</i> are scalar or distributed expressions, and ? is a binary
 arithmetic operator (<code class="methodname">+</code>, <code class="methodname">-</code>, <code class="methodname">*</code>, <code class="methodname">/</code>,
    <code class="methodname">^</code>). Then this is a valid gPROMS expression if and only if it conforms to one of the four cases listed below:</p>
        <div class="informaltable"><a name="AEN2209"></a>
            <table style="mc-table-style: url('../Resources/TableStyles/GeneralTable.css');margin-left: auto;margin-right: auto;" class="TableStyle-GeneralTable" cellspacing="0">
                <thead>
                    <tr class="TableStyle-GeneralTable-Head-Header1">
                        <th align="center" class="TableStyle-GeneralTable-HeadE-Column1-Header1">Case</th>
                        <th align="center" class="TableStyle-GeneralTable-HeadE-Column1-Header1"><code class="methodname">x</code>
                        </th>
                        <th align="center" class="TableStyle-GeneralTable-HeadE-Column1-Header1"><code class="methodname">y</code>
                        </th>
                        <th align="center" class="TableStyle-GeneralTable-HeadE-Column1-Header1">Dimensionality of x ? y</th>
                        <th align="center" class="TableStyle-GeneralTable-HeadD-Column1-Header1">Interpretation of x ? y</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="TableStyle-GeneralTable-Body-Body1">
                        <td class="TableStyle-GeneralTable-BodyE-Column1-Body1">1.</td>
                        <td class="TableStyle-GeneralTable-BodyE-Column1-Body1">Scalar</td>
                        <td class="TableStyle-GeneralTable-BodyE-Column1-Body1">Scalar</td>
                        <td class="TableStyle-GeneralTable-BodyE-Column1-Body1">Scalar</td>
                        <td class="TableStyle-GeneralTable-BodyD-Column1-Body1">x ? y</td>
                    </tr>
                    <tr class="TableStyle-GeneralTable-Body-Body2">
                        <td class="TableStyle-GeneralTable-BodyE-Column1-Body2">2.</td>
                        <td class="TableStyle-GeneralTable-BodyE-Column1-Body2">Array</td>
                        <td class="TableStyle-GeneralTable-BodyE-Column1-Body2">Scalar</td>
                        <td class="TableStyle-GeneralTable-BodyE-Column1-Body2">Same as <code class="methodname">x</code></td>
                        <td class="TableStyle-GeneralTable-BodyD-Column1-Body2"><i class="emphasis">x</i>_{...} ? <i class="emphasis">y</i></td>
                    </tr>
                    <tr class="TableStyle-GeneralTable-Body-Body1">
                        <td class="TableStyle-GeneralTable-BodyE-Column1-Body1">3.</td>
                        <td class="TableStyle-GeneralTable-BodyE-Column1-Body1">Scalar</td>
                        <td class="TableStyle-GeneralTable-BodyE-Column1-Body1">Distribution</td>
                        <td class="TableStyle-GeneralTable-BodyE-Column1-Body1">Same as <code class="methodname">y</code></td>
                        <td class="TableStyle-GeneralTable-BodyD-Column1-Body1"><i class="emphasis">x</i> ? y_{...}</td>
                    </tr>
                    <tr class="TableStyle-GeneralTable-Body-Body2">
                        <td class="TableStyle-GeneralTable-BodyB-Column1-Body2">4.</td>
                        <td class="TableStyle-GeneralTable-BodyB-Column1-Body2">Distribution</td>
                        <td class="TableStyle-GeneralTable-BodyB-Column1-Body2">Distribution</td>
                        <td class="TableStyle-GeneralTable-BodyB-Column1-Body2">Same as <code class="methodname">x</code><i class="emphasis">and</i><code class="methodname">y</code></td>
                        <td class="TableStyle-GeneralTable-BodyA-Column1-Body2">x_{...} ? y_{...}</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <p>Clearly, case 4 is valid only if both <i class="emphasis">x</i> and <i class="emphasis">y</i> are distributed over exactly the same domains, also
 taking account of whether each of these is open or closed. For example, the following is a valid expression:</p><pre class="programlisting">Vz(0|+:ReactorLength,ReactorRadius|-) * Twall(0|+:ReactorLength)</pre>
        <p>that is distributed over the <code class="methodname">Axial</code> domain which is open on (i.e does not include) the left boundary
 (<i class="emphasis">z=0</i>) but closed on (i.e includes) the right boundary
    <i class="emphasis">(z=</i><code class="methodname">ReactorLength</code><i class="emphasis">)</i>. On the other hand, the expression:</p><pre class="programlisting">Vz(0|+:ReactorLength,ReactorRadius) * T(0:ReactorLength,ReactorRadius)</pre>
        <p>is <i class="emphasis">invalid</i> because the first operand <code class="methodname">Vz</code> is distributed over a domain that is open
 on the left and closed on the right, while the second operand <code class="methodname">T</code> is distributed over a domain that is closed on both
 ends.</p>
        <div>
            <p class="Footer">&#160;</p>
            <p class="Footer">&#160;</p>
            <hr width="100%" size="0" align="center" />
            <p class="Footer">Commercial in confidence</p>
            <p class="Footer">© 2017 Process Systems Enterprise Limited</p>
        </div>
    </body>
</html>