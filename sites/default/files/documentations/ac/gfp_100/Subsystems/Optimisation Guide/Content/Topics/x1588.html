<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-gb" xml:lang="en-gb" data-mc-search-type="Stem" data-mc-help-system-file-name="Optimisation Guide.xml" data-mc-path-to-help-system="../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Optimisation|Standard solvers for optimisation">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>The OAERAP solver</title>
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../Resources/Stylesheets/GeneralStyles.css" rel="stylesheet" />
        <link href="../Resources/TableStyles/GeneralTable.css" rel="stylesheet" />
        <script src="../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../Optimisation Guide.htm#Topics/x1588.html">Open topic with navigation</a>
        </p>
        <div>
            <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix">You are here: </span><a class="MCBreadcrumbsLink" href="x257.html">Optimisation</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="x1533.html">Standard solvers for optimisation</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">The OAERAP solver</span>
            </div>
        </div>
        <h1><a name="OAERAP"></a>The OAERAP solver</h1>
        <p>The OAERAP solver employs an outer approximation (OA) algorithm for the solution of the MINLP. As outlined in the algorithm below, this
 involves solving a sequence of simpler optimisation problems, including nonlinear programs (NLPs) at steps 1 and 3 and mixed integer linear programs
 (MILPs) at step 2. The OAERAP code has been designed so that it can make direct use of any CAPE-OPEN compliant NLP and MILP solvers (see the gPROMS
 System Programmer Guide) without the need for any additional interfacing or modification.</p>
        <p><i class="emphasis">Outline of the OAERAP algorithm for the solution of a MINLP problem (minimisation case)</i>
        </p>
        <p><i class="emphasis">Given</i> initial guesses for all optimisation decision variables, both discrete (<i class="emphasis">y</i>) and
 continuous (<i class="emphasis">x</i>):</p>
        <p><i class="emphasis">Step 0: Initialisation</i>
        </p>
        <ul>
            <li value="1">
                <p>Set the objective function of the best solution that is currently available, <span class="inlinemediaobject"><img src="../Resources/Images/eqn_doig-65.png" data-mc-conditions="Default.ScreenOnly" /></span>.</p>
            </li>
            <li value="2">
                <p>Set the objective function of the best solution that may be obtained, <span class="inlinemediaobject"><img src="../Resources/Images/eqn_doig-66.png" data-mc-conditions="Default.ScreenOnly" /></span>.</p>
            </li>
        </ul>
        <p><i class="emphasis">Step 1: Solve fully relaxed problem</i>
        </p>
        <ul>
            <li value="1">
                <p>Solve a continuous optimisation problem (NLP) treating all discrete variables as continuous (i.e. allow them to take any value between
 their lower and upper bounds) to determine optimal values <span class="inlinemediaobject"><img src="../Resources/Images/eqn_doig-67.png" data-mc-conditions="Default.ScreenOnly" /></span> of the optimisation decision variables and of the objective function, <span class="inlinemediaobject"><img src="../Resources/Images/eqn_doig-68.png" data-mc-conditions="Default.ScreenOnly" /></span>.</p>
            </li>
            <li value="2">
                <p>If above problem is infeasible, <i class="emphasis">terminate</i>: original problem is infeasible as posed.</p>
            </li>
            <li value="3">
                <p>If all discrete optimisation decision variables have discrete values at the solution of the above problem, then <i class="emphasis">terminate</i>: optimal solution of original problem is <span class="inlinemediaobject"><img src="../Resources/Images/eqn_doig-69.png" data-mc-conditions="Default.ScreenOnly" /></span> with an objective function value of <span class="inlinemediaobject"><img src="../Resources/Images/eqn_doig-70.png" data-mc-conditions="Default.ScreenOnly" /></span>.</p>
            </li>
        </ul>
        <p><i class="emphasis">Step 2: Solve master problem</i>
        </p>
        <ul>
            <li value="1">
                <p>Construct a mixed integer linear programming (MILP) problem which:</p>
                <ul>
                    <li value="1">
                        <p>involves appropriate linearisations of the objective function and the constraints carried out at the solutions of all continuous
 optimisation problems solved so far,</p>
                    </li>
                    <li value="2">
                        <p>excludes all combinations of discrete variable values that have been considered at step 2 so far.</p>
                    </li>
                </ul>
            </li>
            <li value="2">
                <p>Solve the above MILP problem to determine optimal values of both the continuous and discrete variables <span class="inlinemediaobject"><img src="../Resources/Images/eqn_doig-71.png" data-mc-conditions="Default.ScreenOnly" /></span>, and the corresponding value of the objective function <span class="inlinemediaobject"><img src="../Resources/Images/eqn_doig-72.png" data-mc-conditions="Default.ScreenOnly" /></span>.</p>
            </li>
            <li value="3">
                <p>If the above problem is infeasible or if <span class="inlinemediaobject"><img src="../Resources/Images/eqn_doig-73.png" data-mc-conditions="Default.ScreenOnly" /></span>, then <i class="emphasis">terminate</i>: there are no more combinations of discrete variables that can be
 usefully considered.</p>
                <ul>
                    <li value="1">
                        <p>If <span class="inlinemediaobject"><img src="../Resources/Images/eqn_doig-74.png" data-mc-conditions="Default.ScreenOnly" /></span>, then original problem was infeasible.</p>
                    </li>
                    <li value="2">
                        <p>Otherwise, the optimal solution is <span class="inlinemediaobject"><img src="../Resources/Images/eqn_doig-75.png" data-mc-conditions="Default.ScreenOnly" /></span> with a corresponding objective function value of <span class="inlinemediaobject"><img src="../Resources/Images/eqn_doig-76.png" data-mc-conditions="Default.ScreenOnly" /></span>.</p>
                    </li>
                </ul>
            </li>
            <li value="4">
                <p>The MILP provides an improved bound on the best solution that may be obtained; therefore, update <span class="inlinemediaobject"><img src="../Resources/Images/eqn_doig-77.png" data-mc-conditions="Default.ScreenOnly" /></span>.</p>
            </li>
        </ul>
        <p><i class="emphasis">Step 3: Solve primal optimisation problem</i>
        </p>
        <ul>
            <li value="1">
                <p>Fix all discrete optimisation decision variables to their current values.</p>
            </li>
            <li value="2">
                <p>Solve continuous optimisation problem (NLP) to determine:</p>
                <ul>
                    <li value="1">
                        <p>optimal value of objective function, <span class="inlinemediaobject"><img src="../Resources/Images/eqn_doig-78.png" data-mc-conditions="Default.ScreenOnly" /></span>;</p>
                    </li>
                </ul>
                <ul>
                    <li value="1">
                        <p>optimal values of continuous optimisation decision variables, <span class="inlinemediaobject"><img src="../Resources/Images/eqn_doig-79.png" data-mc-conditions="Default.ScreenOnly" /></span>.</p>
                    </li>
                </ul>
            </li>
            <li value="3">
                <p>If the above NLP is feasible and <span class="inlinemediaobject"><img src="../Resources/Images/eqn_doig-80.png" data-mc-conditions="Default.ScreenOnly" /></span>, then an improved solution to the original problem has been found; record its details by setting <span class="inlinemediaobject"><img src="../Resources/Images/eqn_doig-81.png" data-mc-conditions="Default.ScreenOnly" /></span>.</p>
            </li>
        </ul>
        <p><i class="emphasis">Step 4: Iterate</i>
        </p>
        <ul>
            <li value="1">
                <p>Set the next set of values of the discrete optimisation decision variables to be considered <span class="inlinemediaobject"><img src="../Resources/Images/eqn_doig-82.png" data-mc-conditions="Default.ScreenOnly" /></span>.</p>
            </li>
            <li value="2">
                <p>Repeat from step 2.</p>
            </li>
        </ul>
        <p>The OAERAP solver also includes an equality relaxation (ER) scheme for handling equality constraints. It should be emphasised that, in the case
 of optimisation problems defined in gPROMS, this relaxation is applied only to any ENDPOINT_EQUALITY constraints that may appear in the Optimisation
 Entity.</p>
        <p>The algorithm described above is guaranteed to obtain the globally optimal solution to the optimisation problem posed only if the latter is
 convex. This is unlikely to be the case in many problems of engineering interest. An augmented penalty (AP) strategy is employed in order to increase
 the probability of a global solution being obtained.</p>
        <p>The algorithmic parameters used by OAERAP along with their default values are shown below. This is followed by a detailed description of each
 parameter.</p><pre class="programlisting">"OAERAP" [
 "ConvexityBasedTerminationCriterion" := TRUE,
 "MaxIterations" := 10000,
 "MaxIterNoImprovementNLPSubProblem" := 1,
 "NLPSubProblemInitialGuesses" := "MILPMasterProblem",
 "OptimisationTolerance" := 0.0001,
 "OutputLevel" := 0,
 "MILPSolver" := "LPSOLVE",
 "NLPSolver" := "NLPSQP" ]</pre>
        <dl>
            <dt>ConvexityBasedTerminationCriterion - A boolean value, TRUE&#160;or FALSE; default TRUE</dt>
            <dd>
                <p>Flag to select the termination criterion based on convexity.</p>
                <p>If set to FALSE, the optimisation will be terminated when either of the following condition is satisfied, and the optimal solution will be the point corresponding to the best objective function value of the primary  NLP:</p>
                <p><code>number of iterations &gt;= MaxIterations</code> <![CDATA[ ]]></p>
                <p>or </p>
                <p><code>number of successive iterations without improvement in the objective function of the NLP subproblem &gt;= MaxIterNoImprovementNLPSubProblem</code>.</p>
            </dd>
            <dt>MILPSolver - A quoted string specifying a mixed integer linear programming solver.</dt>
            <dd>
                <p>Specifies a CAPE-OPEN compliant solver to be used for the solution of the mixed integer linear programming (MILP) problems at step 2 of the
 algorithm described above.</p>
            </dd>
            <dt>MaxIterations - An integer in the range [1, 100000].</dt>
            <dd>
                <p>The maximum number of iterations involving step 2-4 of the algorithm described above. This is essentially the maximum number of distinct
 alternatives to be considered by the algorithm</p>
            </dd>
            <dt>MaxIterNoImprovementNLPSubProblem - An integer number in the range [0, 100000]; default 1</dt>
            <dd>
                <p>Maximum number of successive iterations without improvement in the objective function of the NLP subproblem.</p>
            </dd>
            <dt>NLPSolver - A quoted string specifying a nonlinear programming solver.</dt>
            <dd>
                <p>Specifies a CAPE-OPEN compliant solver to be used for the solution of the nonlinear programming (NLP) problems at steps 1 and 3 of the
 algorithm described above.</p>
            </dd>
            <dt>NLPSubProblemInitialGuesses - either "MILPMasterProblem" or "FullyRelaxedNLP"</dt>
            <dd>
                <p>Determines the source of initial guesses for the NLP Primal Optimisation.</p>
                <p>The OAERAP algorithm employs two methods of obtaining initial guesses for the NLP Primal Problems (step 3 above).</p>
                <p>The first is to use the solution of the fully-relaxed problem (step 1) as initial guesses for the solution of the primal problem (step 3)
 at each iteration. To use this method, specify "NLPSubProblemInitialGuesses" := "FullyRelaxedNLP".</p>
                <p>An alternative approach is to use the solution of the MILP master problem, at the current iteration, to provide the initial guesses for the
 NLP primal problem. This is the default method, specified by setting "NLPSubProblemInitialGuesses" := "MILPMasterProblem".</p>
                <p>The method that will be most effective will depend on the problem being solved. One advantage of obtaining initial guesses from the MILP
 master problem is that because the discrete variables in the NLP problem will be set to the values in the solution of the MILP, the values of the
 continuous variables will be consistent with the discrete ones and so should provide a good initial guess for the NLP problem. A common example
 of this behaviour is process synthesis problems, where binary variables can be used to represent the existance of a process in a flowsheet. If
 the solution of an MILP implies that a unit does not exist, then the MILP of step 2 will force some related continuous variables (e.g. the flows
 through these units) to be zero and these are, of course, excellent initial guesses for the NLP problem (by contrast, these might not be zero in
 the solution of the fully-relaxed NLP). However, if the problem is highly non-linear, then the solution of the linearised equations in the MILP
 may not be such a good initial guess for the NLP. In these cases, it may be better to use the solution of the relaxed NLP as the initial guess
 for each NLP primal problem.</p>
            </dd>
            <dt>OptimisationTolerance - A real number in the range [0.0, 1.0].</dt>
            <dd>
                <p>The optimisation tolerance <span class="inlinemediaobject"><img src="../Resources/Images/eqn_doig-83.png" data-mc-conditions="Default.ScreenOnly" /></span> used in the termination criterion at step 2 of the algorithm described above.</p>
            </dd>
            <dt>OutputLevel - An integer in the range [-1, 0].</dt>
            <dd>
                <p>The amount of information generated by the solver. The following table indicates the lowest level at which different types of information
 are produced:</p>
                <div class="informaltable"><a name="AEN1805"></a>
                    <table style="mc-table-style: url('../Resources/TableStyles/GeneralTable.css');margin-left: auto;margin-right: auto;" class="TableStyle-GeneralTable" cellspacing="0">
                        <tbody>
                            <tr class="TableStyle-GeneralTable-Body-Body1">
                                <td class="TableStyle-GeneralTable-BodyE-Column1-Body1">-1</td>
                                <td class="TableStyle-GeneralTable-BodyD-Column1-Body1">(None)</td>
                            </tr>
                            <tr class="TableStyle-GeneralTable-Body-Body2">
                                <td class="TableStyle-GeneralTable-BodyB-Column1-Body2">0</td>
                                <td class="TableStyle-GeneralTable-BodyA-Column1-Body2">Solution of fully relaxed point,<p>solution of master problem,</p><p>solution of primal optimisation
 problem,</p><p>final solution</p></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </dd>
        </dl>
        <div>
            <p class="Footer">&#160;</p>
            <p class="Footer">&#160;</p>
            <hr width="100%" size="0" align="center" />
            <p class="Footer">Commercial in confidence</p>
            <p class="Footer">© 2017 Process Systems Enterprise Limited</p>
        </div>
    </body>
</html>