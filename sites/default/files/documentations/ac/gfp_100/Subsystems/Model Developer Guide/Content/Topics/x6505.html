<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-gb" xml:lang="en-gb" data-mc-search-type="Stem" data-mc-help-system-file-name="Model Developer Guide.xml" data-mc-path-to-help-system="../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Custom Modelling|[%=System.LinkedTitle%]|Defining Schedules">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>The Save and Restore elementary tasks</title>
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../Resources/Stylesheets/GeneralStyles.css" rel="stylesheet" />
        <script src="../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../Model Developer Guide.htm#Topics/x6505.html">Open topic with navigation</a>
        </p>
        <div>
            <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix">You are here: </span><a class="MCBreadcrumbsLink" href="Custom Modelling.htm">Custom Modelling</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="Modelling in the gPROMS Language.htm">Modelling in the gPROMS Language</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="c5411.html">Defining Schedules</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">The Save and Restore elementary tasks</span>
            </div>
        </div>
        <h1><a name="AEN6505"></a>The Save and Restore elementary tasks</h1>
        <p>Occasionally, it may be necessary to use the solution of one simulation in another. gPROMS provides a facility to Save the current values of all
 or some of the variables in a simulation and to Restore them in (the same) or another simulation through the use of <i class="emphasis"><a href="x515.html">Saved Variable Sets</a></i>. The syntax of the <code class="methodname">SAVE</code> and <code class="methodname">RESTORE</code> tasks
 are:</p><pre class="programlisting">SAVE <i class="emphasis">&lt;VarType&gt;</i> "<i class="emphasis">V_Set_Name</i>"</pre>
        <p>and</p><pre class="programlisting">RESTORE <i class="emphasis">&lt;VarType&gt;</i> "<i class="emphasis">V_Set_Name</i>"</pre>
        <p>where the optional argument <i class="emphasis">VarType</i> can be one of <code class="methodname">STATE</code>, <code class="methodname">ALGEBRAIC</code> and
    <code class="methodname">INPUT</code> (or any combination of these, separated by commas), and <i class="emphasis">V_Set_Name</i> is the name of the <a href="x515.html"><i class="emphasis">Saved Variable Set</i></a> that the variables will be saved in (or restored from). If the
    <i class="emphasis">VarType</i> argument is omitted, then gPROMS will save the values of all variables; whereas arguments <code class="methodname">STATE</code>,
    <code class="methodname">ALGEBRAIC</code> and <code class="methodname">INPUT</code> instruct gPROMS to save only the values of the state, algebraic or input
 variables respectively. The <i class="emphasis">VarType</i> optional argument works similarly with the Restore task.</p>
        <p>Any new <i class="emphasis">Variable Set</i> created during a simulation activity using the Save elementary task will be stored in the Results
 Entity group within the Execution Case. So that the <i class="emphasis">Variable Set</i> can be used in conjunction with the Restore elementary task, the
    <i class="emphasis">Variable Set</i> must then be copied into the working project where it will appear in the <i class="emphasis">Saved Variable Sets</i>
    Entity group.</p>
        <p>It is also possible to over-write (or modify) an existing <i class="emphasis">Variable Set</i> by using the Save elementary task on a
    <i class="emphasis">Variable Set</i> already present in the source project. In this instance, two Saved Variable Sets with the same name will appear in
 the Execution Case: the original (from the working project) will appear in the <i class="emphasis">Original Entities</i> and the new entity created by the
 Save elementary task will be stored under <i class="emphasis">Results</i>.</p>
        <p>gPROMS can be configured so that the <i class="emphasis">Saved Variable Set</i> in the Project is automatically updated. This is done by
 checking the <tt class="guilabel"><b>auto update source project</b></tt> option in the execution dialog that can also be seen in the figure below.</p>
        <div class="figure"><a name="savedvariablesets"></a>
            <div class="mediaobject">
                <p>
                    <img src="../Resources/Images/MDG_SavedVariableSets2.png" />
                </p>
            </div>
            <p class="FigureCaption"> Auto Update Source Project Option</p>
        </div>
        <p>Variables may also be Restored from multiple sets, separated by commas:</p><pre class="programlisting">RESTORE "<i class="emphasis">v_set1</i>", "<i class="emphasis">v_set2</i>"</pre>
        <p>Note that, unlike in the PRESET section, when using the Restore <i class="emphasis">Task</i> to restore state Variables, the values of all Selector
 Variables will be restored as well.</p>
        <p>The gPROMS code below illustrates how the <code class="methodname">SAVE</code> and <code class="methodname">RESTORE</code> tasks could have been used in the
 example problem presented in the <a href="x6400.html">Monitor section</a>. Rather than solving the problem in one Process, with Monitor used to
 show only the last cycle of operation, here we can use two Processes: one to establish the cyclic steady state and to save the variables, and the
 second to simulate a single cycle using as initial conditions the values of the variables at the end of the simulation of the first Process. One
 advantage of this approach is that the variables can be plotted against the <i class="emphasis">local</i> time for the cycle (i.e. the cycle starts at
 time = 0) as opposed to the global time of the whole simulation (where the start of the cycle will be at some arbitrary time).</p>
        <div class="example" data-mc-autonum="&lt;b&gt;Example&lt;/b&gt;"><span class="autonumber"><span><b>Example</b></span></span><a name="AEN6561"></a>
            <p><b>Example 11. Application of the Save and Restore Tasks.</b>
            </p><pre class="programlisting"># the Schedule of one Process or Task
 SCHEDULE
 SEQUENCE
 MONITOR OFF
 DoSomeCycles ;
 SAVE STATE "CyclicSteadyState"
 END</pre><pre class="programlisting"># the Schedule of another Process or Task
 SCHEDULE
 SEQUENCE
 MONITOR OFF
 RESTORE STATE "CyclicSteadyState"
 MONITOR ON
 DoOneCycle ;
 END</pre>
        </div>
        <p>When Save or Restore Tasks are inserted into the Schedule using the graphical editor, the following configuration dialogs are used.</p>
        <div class="figure"><a name="AEN6566"></a>
            <div class="mediaobject">
                <p>
                    <img src="../Resources/Images/MDG_ScheduleTab_TaskConfig_Save.png" />
                </p>
            </div>
            <p class="FigureCaption"> Save Task configuration dialog</p>
        </div>
        <div class="figure"><a name="AEN6573"></a>
            <div class="mediaobject">
                <p>
                    <img src="../Resources/Images/MDG_ScheduleTab_TaskConfig_Restore.png" />
                </p>
            </div>
            <p class="FigureCaption"> Restore Task configuration dialog</p>
        </div>
        <p>When configuring a Save Task, the name of the <i class="emphasis">Saved Variable Set</i> must be entered in the text box. The types of Variables
 stored in the <i class="emphasis">Saved Variable Set</i> are specified by checking or unchecking the boxes next to the Variable types: input, algebraic
 and state (differential). These can be set in any combination.</p>
        <p>The Restore Task is configured similarly to the Save Task. The only exception is that the name of the <i class="emphasis">Saved Variable Set</i>
    must be specified by choosing an option from the list box. The list box will only contain the names of the <i class="emphasis">Saved Variable Set</i>s
 present in the Project.</p>
        <div>
            <p class="Footer">&#160;</p>
            <p class="Footer">&#160;</p>
            <hr width="100%" size="0" align="center" />
            <p class="Footer">Commercial in confidence</p>
            <p class="Footer">Â© 2017 Process Systems Enterprise Limited</p>
        </div>
    </body>
</html>