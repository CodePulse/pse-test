<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-gb" xml:lang="en-gb" data-mc-search-type="Stem" data-mc-help-system-file-name="Model Developer Guide.xml" data-mc-path-to-help-system="../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Custom Modelling|[%=System.LinkedTitle%]|Defining Tasks">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>The Parameter section of a Task</title>
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../Resources/Stylesheets/GeneralStyles.css" rel="stylesheet" />
        <script src="../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../Model Developer Guide.htm#Topics/x6626.html">Open topic with navigation</a>
        </p>
        <div>
            <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix">You are here: </span><a class="MCBreadcrumbsLink" href="Custom Modelling.htm">Custom Modelling</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="Modelling in the gPROMS Language.htm">Modelling in the gPROMS Language</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="c6586.html">Defining Tasks</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">The Parameter section of a Task</span>
            </div>
        </div>
        <h1><a name="md_task_parameter"></a>The Parameter section of a Task</h1>
        <p>The <a href="x6596.html">Digital PI control example</a>, although useful for grouping a series of elementary tasks
 together, has a big disadvantage: it is extremely specific. First of all, it refers to a unique sensor/valve pair,
    <code class="methodname">Sensor101</code> and <code class="methodname">Valve201</code> respectively. Moreover, the sampling interval (5 time units) and
 controller tuning parameters (150.0, 0.5, 1.2, 20.0) are expressed as constant values. Finally, the task always terminates after 1000 time units
 have elapsed and is thus appropriate for a simulation of that length only. If it were necessary to apply the same operating procedure to a
 different sensor/valve pair possibly using different tuning parameters for the controller, a new Task would have to be declared. This is clearly
 unsatisfactory. In most instances, we want to be able to declare Tasks that are independent of the details of an individual simulation.</p>
        <p>For instance, we want to be able to define a Task that switches 'a' pump on and another that switches 'a' pump off. 'A' is used to indicate
 that the actual pump on which the Tasks act remains unspecified until the moment they are used in a particular simulation experiment. Similarly,
 we want to be able to define a Task for 'a' digital controller and only specify the sensor/valve pair it uses and the values for its tuning
 parameters when the Task is actually used in a simulation experiment.</p>
        <p>This is achieved by using Task parameters. Upon declaration, a Task can be parameterised with respect to an arbitrary number of parameters.
 The actual values of these parameters have to be specified only when the Task is actually used in a specific simulation experiment.</p>
        <p>Task parameters are declared in the Parameter section. Declared parameters may be of any of the following types:</p>
        <ul>
            <li value="1">
                <p><code class="methodname">INTEGER</code>, <code class="methodname">REAL</code> or <code class="methodname">LOGICAL</code> constants. These are used to
 parameterise a <code class="methodname">TASK</code> with respect to, for instance, controller tuning parameters, event durations etc.</p>
            </li>
            <li value="2">
                <p><code class="methodname">INTEGER_EXPRESSION</code>, <code class="methodname">REAL_EXPRESSION</code> or <code class="methodname">LOGICAL_EXPRESSION</code>.
 These are used to parameterise a <code class="methodname">TASK</code> with respect to, for instance, logical conditions for the conditional and
 iterative structures etc.</p>
            </li>
            <li value="3">
                <p><code class="methodname">MODEL</code>. These are used to parameterise a <code class="methodname">TASK</code> with respect to the actual Models on
 which it acts.</p>
            </li>
        </ul>
        <div class="example" data-mc-autonum="&lt;b&gt;Example&lt;/b&gt;"><span class="autonumber"><span><b>Example</b></span></span><a name="AEN6652"></a>
            <p><b>Example 2. Task to switch on a pump</b>
            </p><pre class="programlisting"># TASK SwitchPumpOn

 PARAMETER
 Pump AS MODEL GenericPump

 SCHEDULE
 RESET
 Pump.Status := Pump.Open ;
 END # Reset</pre>
        </div>
        <p>This example shows a task that switches a pump on. Once this Task has been defined, it can be used in a Schedule section. For
 instance,</p><pre class="programlisting">SCHEDULE
 ...
 SwitchPumpOn(Pump IS Plant.P201)
 ...</pre>
        <p>will switch on pump Plant.P201, while</p><pre class="programlisting">SCHEDULE
 ...
 SEQUENCE
 SwitchPumpOn(Pump IS Plant.P205)
 SwitchPumpOn(Pump IS Plant.P206)
 SwitchPumpOn(Pump IS Plant.P207)
 END # Sequence
 ...</pre>
        <p>will, in sequence, switch on pumps <code class="methodname">Plant.P205</code>, <code class="methodname">Plant.P206</code> and
    <code class="methodname">Plant.P207</code>.</p>
        <p>Note that, when executing a Task that contains parameters, the proper list of arguments must be given along with the name of the Task. Tasks
 that contain parameters can be thought of as the equivalent of subroutines or functions in high-level programming languages. Variables declared in
 the Variable section are the equivalent of local subroutine variables. On the other hand, the Parameter section is the equivalent of a function
 prototype. It defines the number and type of arguments that a Task accepts as arguments. A 'call' to the Task then includes a list of all the
 Parameters declared in the Task and values for each of them.</p>
        <div class="example" data-mc-autonum="&lt;b&gt;Example&lt;/b&gt;"><span class="autonumber"><span><b>Example</b></span></span><a name="ComplexOpsDigitalPIB"></a>
            <p><b>Example 3. Parameterised Task for a digital PI control law</b>
            </p><pre class="programlisting"># TASK DigitalPI

 PARAMETER
 SetPoint, Bias, Gain, IntegralTime AS REAL
 SamplingInterval AS REAL
 TerminationCondition AS LOGICAL_EXPRESSION
 Sensor AS MODEL GenericSensor
 Valve AS MODEL GenericValve

 VARIABLE
 Error, IntegralError, ControlSignal AS REAL

 SCHEDULE
 SEQUENCE
 IntegralError := 0 ;
 WHILE NOT TerminationCondition DO
 SEQUENCE
 CONTINUE FOR SamplingInterval
 Error := SetPoint - Sensor.Measurement ;
 IntegralError := IntegralError + SamplingInterval*Error ;
 ControlSignal := Bias + Gain*( Error +
 IntegralError/IntegralTime ) ;
 IF ControlSignal &gt; 1.0 THEN
 RESET Valve.Position := 1.0 ; END
 ELSE
 IF ControlSignal &lt; 0.0 THEN
 RESET Valve.Position := 0.0 ; END
 ELSE
 RESET Valve.Position := OLD(ControlSignal) ; END
 END # If
 END # If
 END # Sequence
 END # While
 END # Sequence</pre>
        </div>
        <p>This example presents the correct version of the digital controller Task. The Parameters include real constants that determine the various
 tuning parameters and the sampling interval, a logical expression that determines the termination of control, and model parameters that determine
 the sensor/valve pair on which the controller is used.</p>
        <p>This Task is much more reusable. It can be used for any sensor/valve pair in a simulation experiment and different tuning parameters for the
 controller can be specified without rewriting the Task. For instance,</p><pre class="programlisting">SCHEDULE
 ...
 PARALLEL
 DigitalPI
 ( SetPoint IS 150.0,
 Bias IS 0.5,
 Gain IS 1.2,
 IntegralTime IS 20.0,
 SamplingInterval IS 5.0,
 TerminationCondition IS Plant.T101.TotalVolume &gt; 5.0,
 Sensor IS Plant.Sensor101,
 Valve IS Plant.Valve205 )
 DigitalPI
 ( SetPoint IS 10.0,
 Bias IS 0.8,
 Gain IS 2.6,
 IntegralTime IS 50.0,
 SamplingInterval IS 1.0,
 TerminationCondition IS Plant.R101.Temperature &gt; 80.0,
 Sensor IS Plant.Sensor103,
 Valve IS Plant.Valve207 )
 END # Parallel
 ...</pre>
        <p>will initiate two digital control procedures in parallel, acting on two different sensor/valve pairs. The two procedures also have different
 controller tuning characteristics and a different logical expression determining their termination.</p>
        <div>
            <p class="Footer">&#160;</p>
            <p class="Footer">&#160;</p>
            <hr width="100%" size="0" align="center" />
            <p class="Footer">Commercial in confidence</p>
            <p class="Footer">Â© 2017 Process Systems Enterprise Limited</p>
        </div>
    </body>
</html>