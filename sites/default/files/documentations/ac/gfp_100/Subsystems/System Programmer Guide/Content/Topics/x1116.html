<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-gb" xml:lang="en-gb" data-mc-search-type="Stem" data-mc-help-system-file-name="System Programmer Guide.xml" data-mc-path-to-help-system="../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="System Programming|Developing New Foreign Objects|Implementation of Foreign Objects">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Writing Foreign Objects in FORTRAN and C</title>
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../Resources/Stylesheets/GeneralStyles.css" rel="stylesheet" />
        <script src="../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../System Programmer Guide.htm#Topics/x1116.html">Open topic with navigation</a>
        </p>
        <div>
            <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix">You are here: </span><a class="MCBreadcrumbsLink" href="c251.html">System Programming</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="c271.html">Developing New Foreign Objects</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="x1084.html">Implementation of Foreign Objects</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">Writing Foreign Objects in FORTRAN and C</span>
            </div>
        </div>
        <h1><a name="AEN1116"></a>Writing Foreign Objects in FORTRAN and C</h1>
        <p>As mentioned in the section on <a href="x276.html">the gPROMS Foreign Object Interface</a>, any Foreign Object
 implementation has to provide six service procedures. For convenience, example files are provided for both FORTRAN and C. The example files can be
 stripped of their method implementations so that they contain only the calling frame for the service procedures. The names of these files are
      <tt class="filename">foi_demo_c.c</tt> and <tt class="filename">foi_demo_f.f</tt>.<a href="javascript:void(0);" class="MCTextPopup popup popupHead" style="font-size: 0.9em; vertical-align: super">1<span class="MCTextPopupBody MCTextPopupBody_Closed needs-pie popupBody"><span class="MCTextPopupArrow"></span>All the provided example code can be found in subdirectories of the "src/examples/foi" subdirectory of the gPROMS installation
 directory.</span></a>. The C version also relies on the header files "gFOInterface.h" and "gTypes.h" which:</p>
        <ul>
            <li value="1">
                <p>provide prototype definitions for the six Foreign Object interface routines,</p>
            </li>
            <li value="2">
                <p>define a macro which ensures that the function prototypes are exported when compiling for MS Windows and</p>
            </li>
            <li value="3">
                <p>define own versions of the basic types for ease of portability.</p>
            </li>
        </ul>
        <p><i class="emphasis">Please note:</i> It is strongly recommended that you do not change the prototypes and type definitions because
 they ensure that the function calls follow the conventions gPROMS uses internally.</p>
        <p>In addition to the above files, the gPROMS project file, <tt class="filename">foi_demo.gPJ</tt> is provided which calls the methods provided in the
 example implementation. This example shows how to evaluate the arguments from the service procedures and how to trigger the methods of the Foreign
 Objects you wish to implement; here the calculation of the liquid level and the flow out of a tank are implemented.</p>
        <div>
            <p class="Footer">&#160;</p>
            <p class="Footer">&#160;</p>
            <hr width="100%" size="0" align="center" />
            <p class="Footer">Commercial in confidence</p>
            <p class="Footer">Â© 2017 Process Systems Enterprise Limited</p>
        </div>
    </body>
</html>