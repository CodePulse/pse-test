<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-gb" xml:lang="en-gb" data-mc-search-type="Stem" data-mc-help-system-file-name="Model Developer Guide.xml" data-mc-path-to-help-system="../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Custom Modelling in gPROMS|Defining Tasks">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Intrinsic Tasks</title>
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../Resources/Stylesheets/GeneralStyles.css" rel="stylesheet" />
        <script src="../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../Model Developer Guide.htm#Topics/x6829.html">Open topic with navigation</a>
        </p>
        <div>
            <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix">You are here: </span><a class="MCBreadcrumbsLink" href="Custom Modelling.htm">Custom Modelling in gPROMS</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="c6586.html">Defining Tasks</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">Intrinsic Tasks</span>
            </div>
        </div>
        <h1><a name="MDG_IntrinsicTasks"></a>Intrinsic Tasks</h1>
        <p>When discussing the <a href="x6626.html">Parameter</a> section within a Task, we considered an example where there were two
 digital PI controllers. The Task for each controller must be called in the Process section in order to activate the controller and specify its
 tuning parameters. This small example of just two controllers requires a reasonable amount of code to be written in the Schedule section of the
 Process. More complex Models, where there might be tens or even hundreds of controllers, may lead to a large schedule section with much repeated
 code. Specifying all of these tasks is not only time consuming but also prone to error. Since these Tasks must be enabled for each and every
 controller, it is possible to automate the specification of these Tasks in the Schedule of a Process. More generally, one can associate a number
 of Tasks with any Model, so that each instantiation of the Model automatically (and invisibly) adds the Tasks to the Schedule section. These are
 called Intrinsic Tasks and are nothing more than a declaration in the Model of which (already defined) Tasks should be automatically included in
 the Schedule, thus automating the laborious manual procedure.</p>
        <p>As an example of the use of Intrinsic Tasks, let us assume that we want to model a plant with three reactors that are structurally identical
 but are used for different duties. This means that the plant Model will contain three instances of the same reactor Model but with different
 properties. Now if the reactor Model contains three control loops, e.g. for pressure, temperature and level, the following Schedule would be
 required to model the controllers using ordinary Tasks. (For brevity, some parameters have been omitted.)</p><pre class="programlisting">SCHEDULE
 ...
 PARALLEL
 # Controllers for Reactor1
 DigitalPI
 ( SetPoint IS 373.0,
 Bias IS 0.5,
 Gain IS 1.2,
 Sensor IS Plant.Reactor1.TemperatureSensor,
 Valve IS Plant.Reactor1.CoolingWaterValve )
 DigitalPI
 ( SetPoint IS 10.0,
 Bias IS 0.8,
 Gain IS 2.6,
 Sensor IS Plant.Reactor1.PressureSensor,
 Valve IS Plant.Reactor1.PressureReliefValve )
 DigitalPI
 ( SetPoint IS 1.0,
 Bias IS 0,
 Gain IS 2,
 Sensor IS Plant.Reactor1.LevelSensor,
 Valve IS Plant.Reactor1.LiquidOutletValve )

 # Controllers for Reactor2
 DigitalPI
 ( SetPoint IS 425.0,
 Bias IS 1,
 Gain IS 3,
 Sensor IS Plant.Reactor2.TemperatureSensor,
 Valve IS Plant.Reactor2.CoolingWaterValve )
 DigitalPI
 ( ...
 Sensor IS Plant.Reactor2.PressureSensor,
 Valve IS Plant.Reactor2.PressureReliefValve )
 DigitalPI
 ( ...
 Sensor IS Plant.Reactor2.LevelSensor,
 Valve IS Plant.Reactor2.LiquidOutletValve )
 
 # Controllers for Reactor3
 ...
 END # Parallel
 ...</pre>
        <p>Clearly, there is a lot of repeated code that is mostly unnecessary apart from the need to specify different tuning parameters. The use of
 Intrinsic Tasks is ideal in this type of situation. To implement Intrinsic Task, one first has to define them in the Model itself, which is
 illustrated below for the reactor example.</p><pre class="programlisting"># MODEL Reactor

 PARAMETER
 ...
 TemperatureSetpoint AS REAL
 TemperatureGain AS REAL
 ...

 ...

 EQUATION
 ...

 INTRINSIC_TASK
 DigitalPI
 ( SetPoint IS TemperatureSetPoint,
 Bias IS TemperatureBias,
 Gain IS TemperatureGain,
 Sensor IS TemperatureSensor,
 Valve IS CoolingWaterValve )
 DigitalPI
 ( SetPoint IS PressureSetPoint,
 Bias IS PressureBias,
 Gain IS PressureGain,
 Sensor IS PressureSensor,
 Valve IS PressureReliefValve )
 DigitalPI
 ( SetPoint IS LevelSetPoint,
 Bias IS LevelBias,
 Gain IS LevelGain,
 Sensor IS LevelSensor,
 Valve IS LiquidOutletValve )

# END of Model Reactor</pre>
        <p>Now, each instance of the Model Reactor will automatically have DigitalPI Tasks enabled in the Schedule section of the Process without the
 user needing to provide them. Of course, the set points and tuning parameters will need to be specified (unless defaults are provided and are
 suitable) but these would have to be specified in any case. So the Schedule section could be a simple as:</p><pre class="programlisting">SCHEDULE
 CONTINUE FOR 100</pre>
        <p>and the controller Tasks will be added, in parallel with the user-defined Schedule, by gPROMS when the Process is executed.</p>
        <p>Note that since ordinary Tasks are only active in dynamic Simulation activities, Intrinsic Tasks are also limited to dynamic Simulation
 activities. In other words, if a Process contains dynamic Models with Intrinsic Tasks, they will be ignored if there is no Schedule section
 defined in the Process or if the <tt class="guilabel"><b>Ignore schedule</b></tt> option of the Execution Dialog is checked.</p>
        <p>In the above examples, the names of a number of Units within the Model were passed to the Model Parameters of the Task. It may also be
 necessary to pass the Model itself as an argument to the Task. The <code class="varname">This_Unit</code> keyword is used for this purpose, as illustrated
 below.</p><pre class="programlisting"># MODEL A_model

 ...

 INTRINSIC_TASK
 Task1(
 theModel IS This_Unit,
 aParameter IS 10 )</pre>
        <p>In this example, any instances of <code class="varname">A_model</code> will automatically have their names passed as arguments to the
    <code class="varname">Task1</code> Tasks (which are automatically generated in parallel with the user-defined Schedule).</p>
        <div>
            <p class="Footer">&#160;</p>
            <p class="Footer">&#160;</p>
            <hr width="100%" size="0" align="center" />
            <p class="Footer">Commercial in confidence</p>
            <p class="Footer">Â© 2016 Process Systems Enterprise Limited</p>
        </div>
    </body>
</html>