<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-gb" xml:lang="en-gb" data-mc-search-type="Stem" data-mc-help-system-file-name="Model Developer Guide.xml" data-mc-path-to-help-system="../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Custom Modelling in gPROMS|Controlling the Execution of Model-based Activities|Standard solvers for differential-algebraic equations|The DASOLV solver">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Large residual warnings</title>
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../Resources/Stylesheets/GeneralStyles.css" rel="stylesheet" />
        <script src="../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../Model Developer Guide.htm#Topics/x8228.html">Open topic with navigation</a>
        </p>
        <div>
            <div class="nocontent">
                <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="5" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                </div>
            </div>
        </div>
        <h1><a name="largeresids"></a>Large residual warnings</h1>
        <p>At the end of every time step, DASOLV examines the equation which has the largest residual in magnitude, and records an estimate of the error
 committed in each variable <i class="emphasis">x</i><sub>i</sub> in this equation. To do this it uses the value of the Jacobian element
 with respect to that variable (i.e. the partial derivative of the equation w.r.t. <i class="emphasis">x</i><sub>i</sub>), to estimate the
 change delta_i that would be needed in that variable in isolation to bring the residual to zero. The specific measure used is |delta_i|/max(|x_i|,
 |x_i+delta_i|), i.e. the size of the change relative to either the actual value or the value which would remove the residual, whichever is greater.
 This is referred to as the error measure for that variable.</p>
        <p>The most important consideration for a given equation is then the <i class="emphasis">smallest</i> error measure. The reason for this is that if
 the residual can be brought to zero by a very small change in any variable, a larger error measure for another variable is relatively
 meaningless.</p>
        <p>At the end of the integration, when the smallest error measure in the equation with the largest residual on any single time step exceeds the
 threshold convtol*10, this single equation is reported<a href="javascript:void(0);" class="MCTextPopup popup popupHead" style="font-size: 0.9em; vertical-align: super">1<span class="MCTextPopupBody MCTextPopupBody_Closed needs-pie popupBody"><span class="MCTextPopupArrow"></span>Note that the tolerance used in the test, convtol, is taken from DASOLV's ReinitialisationNLSolver. This is done in order to relate the
 error acceptable at an integration step to the error that might be committed when reinitialising the system at a discontinuity.</span></a>. All such residuals are reported as follows:</p>
        <ul>
            <li value="1">
                <p>First the residual and time are indicated.</p>
            </li>
            <li value="2">
                <p>The smallest error measure and the variable concerned are displayed in parentheses.</p>
            </li>
            <li value="3">
                <p>The equation itself is then displayed.</p>
            </li>
            <li value="4">
                <p>This is followed by a table containing a row for each variable in the equation, indicating its name, value at the time, Jacobian element
 value at the time, the value of delta_i as described above, and the error measure in the form of a percentage.</p>
            </li>
        </ul>
        <p>Note that if one or more singular Jacobians were observed during the solution, all equations where the smallest error measure exceeds
 convtol/10 (i.e. 100 times more sensitive than the normal case) are reported, since this situation has been found to lead to problems with variable
 values.</p>
        <p>Also, if the DASOLV solution parameter Diag is set to true, the threshold used for this test is 10<sup>-8</sup></p>
        <p>In these cases where more than one residual is reported, the list is displayed in descending order of error measure, so that the first
 entries are likely to be the most significant.</p>
        <div>
            <p class="Footer">&#160;</p>
            <p class="Footer">&#160;</p>
            <hr width="100%" size="0" align="center" />
            <p class="Footer">Commercial in confidence</p>
            <p class="Footer">Â© 2017 Process Systems Enterprise Limited</p>
        </div>
    </body>
</html>