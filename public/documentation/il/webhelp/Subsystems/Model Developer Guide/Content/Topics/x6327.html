<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-gb" xml:lang="en-gb" data-mc-search-type="Stem" data-mc-help-system-file-name="Model Developer Guide.xml" data-mc-path-to-help-system="../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Custom Modelling in gPROMS|Defining Schedules|Specifying the relative timing of multiple tasks">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Iterative execution – While</title>
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../Resources/Stylesheets/GeneralStyles.css" rel="stylesheet" />
        <script src="../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../Model Developer Guide.htm#Topics/x6327.html">Open topic with navigation</a>
        </p>
        <div>
            <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix">You are here: </span><a class="MCBreadcrumbsLink" href="Custom Modelling.htm">Custom Modelling in gPROMS</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="c5411.html">Defining Schedules</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="x6199.html">Specifying the relative timing of multiple tasks</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">Iterative execution – While</span>
            </div>
        </div>
        <h1><a name="AEN6327"></a>Iterative execution – While</h1>
        <p>Many processing systems are characterised by the repetitive nature of external actions required to achieve the desired operation. For example,
 periodic processes, such as pressure swing or temperature swing adsorption, are usually brought to and maintained at a 'cyclic steady-state' by a
 sequence of external actions that is applied repeatedly. Also, the action of a digital control system on a process can be considered to consist of a
 regular cycle between continuous operation, sampling and implementation of discrete actions.</p>
        <p>The While iterative structure permits the repeated execution of the tasks it encloses for as long as a logical condition is satisfied. When the
 While structure is first encountered, the logical condition is examined. If it is satisfied, the enclosed tasks are executed. The condition is then
 examined again and, if still satisfied, the enclosed tasks are executed once more. This process continues until the condition is no longer satisfied,
 at which point the execution of the While structure is completed. Note that, if the condition is not satisfied initially, the execution of the While
 structure terminates immediately. The gPROMS code below illustrates the use of a <code class="methodname">WHILE</code> structure in specifying the operation
 of a digital PI controller. While the conversion in the reactor is below 0.95, the controller repeatedly goes through an inactive step of 5 time
 units (<code class="methodname">CONTINUE</code> task), followed by a sampling and calculation step (<code class="methodname">REASSIGN</code> task), followed by a
 clipping and implementation step (<code class="methodname">IF</code> structure).</p>
        <div class="example" data-mc-autonum="&lt;b&gt;Example&lt;/b&gt;"><span class="autonumber"><span><b>Example</b></span></span><a name="AEN6335"></a>
            <p><b>Example 9. Application of the While iterative structure</b>
            </p><pre class="programlisting" xml:space="preserve">SCHEDULE

 ...

 WHILE R101.Conversion &lt; 0.95 DO
  SEQUENCE
  # Continuous operation
  CONTINUE FOR 5
   # Sampling and calculation
   REASSIGN
     C101.Error := 150.0 - Sensor101.Measurement ;
     C101.IntegralError := C101.IntegralError + 5.0*C101.Error ;
     C101.ControlSignal := 0.5 + 1.2*(C101.Error +
     C101.IntegralError/20.0) ;
   END # Reassign
   # Clipping and implementation
   IF C101.ControlSignal &gt; 1.0 THEN
     REASSIGN
     V101.Position := 1.0 ;
     END
   ELSE
     IF C101.ControlSignal &lt; 0.0 THEN
       REASSIGN
         V101.Position := 0.0 ;
       END
     ELSE
       REASSIGN
         V101.Position := OLD(C101.ControlSignal) ;
       END
     END # If
   END # If
 END # Sequence
END # While

 ...</pre>
        </div>
        <p>When using the graphical interface, inserting a While Task will activate the following Task configuration dialog.</p>
        <div class="figure"><a name="AEN6339"></a>
            <div class="mediaobject">
                <p>
                    <img src="../Resources/Images/MDG_ScheduleTab_TaskConfig_While.png" />
                </p>
            </div>
            <p class="FigureCaption"> While Task configuration dialog</p>
        </div>
        <p>Enter a valid logical expression in the text box (e.g. <span class="gPROMSLanguage">R101.Conversion &lt; 0.95</span>) and press the <b class="guibutton">OK</b> button.
 gPROMS checks the syntax of the expression and only enables the <b class="guibutton">OK</b> button when it is valid.</p>
        <p>There is no Advanced view of the configuration dialog for the While Task.</p>
        <p>Once a valid expression has been provided, the While Task will be inserted and will look like this:</p>
        <div class="figure"><a name="AEN6352"></a>
            <div class="mediaobject">
                <p>
                    <img src="../Resources/Images/MDG_ScheduleTab_WhileNew.png" />
                </p>
            </div>
            <p class="FigureCaption"> A new If Task</p>
        </div>
        <p>The While Task may only contain a single Task. Any Task can be dragged onto the hot spot for the While Task. To include more Tasks, they must
 be contained in one of the other Composite Tasks, so drag a Sequence, Parallel or If Task into the While Task and then drag new Tasks into the
 Composite Task. (A quicker way to include a Sequence Task is to drag the first Elementary Task into the While Task and then to drag the second
 Elementary Task into it after the first: gPROMS will then automatically insert the required Sequence Task.</p>
        <p>The graphical representation of the example above is shown below.</p>
        <div class="figure"><a name="AEN6361"></a>
            <div class="mediaobject">
                <p>
                    <img src="../Resources/Images/MDG_ScheduleTab_Example_While_full.png" />
                </p>
            </div>
            <p class="FigureCaption"> Graphical representation of the While Task</p>
        </div>
        <div>
            <p class="Footer">&#160;</p>
            <p class="Footer">&#160;</p>
            <hr width="100%" size="0" align="center" />
            <p class="Footer">Commercial in confidence</p>
            <p class="Footer">© 2016 Process Systems Enterprise Limited</p>
        </div>
    </body>
</html>