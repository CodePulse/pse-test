<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-gb" xml:lang="en-gb" data-mc-search-type="Stem" data-mc-help-system-file-name="Model Developer Guide.xml" data-mc-path-to-help-system="../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Custom Modelling in gPROMS|Defining Schedules|Specifying the relative timing of multiple tasks">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Conditional execution – If</title>
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../Resources/Stylesheets/GeneralStyles.css" rel="stylesheet" />
        <script src="../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../Model Developer Guide.htm#Topics/x6284.html">Open topic with navigation</a>
        </p>
        <div>
            <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix">You are here: </span><a class="MCBreadcrumbsLink" href="Custom Modelling.htm">Custom Modelling in gPROMS</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="c5411.html">Defining Schedules</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="x6199.html">Specifying the relative timing of multiple tasks</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">Conditional execution – If</span>
            </div>
        </div>
        <h1><a name="AEN6284"></a>Conditional execution – If</h1>
        <p>In many circumstances, the correct external actions to apply to a system cannot be fully determined <i class="emphasis">a priori</i> and must be
 established from decisions that can only be made while the simulation is in progress. For instance, consider a batch operation involving a series of
 elementary processing steps applied to a batch of material. Once all steps are completed a decision is made as to whether the batch is acceptable,
 should receive further processing or should be discarded. This decision depends only on the quality of the batch, so the result can only be
 established after the preceding steps have been completed.</p>
        <p>The If conditional structure enables selection between alternative actions based on the current status of a system. In common with most
 programming languages, it comprises an If clause, an optional Else clause and a logical condition. If the logical condition is true when the If
 structure is encountered, the contents of the If clause are executed; otherwise, the contents of the Else clause are executed. As with all other
 timing structures, conditional structures can be nested in arbitrary manner. The gPROMS code below shows the application of the If structure to
 'clipping' a digital control signal before sending it off to a control valve. If, at the time of execution, the signal proves to be greater than 1.0
 or less that 0.0, the stem position is set to 1.0 and 0.0 respectively. Otherwise, the stem position is set to the value indicated by the control
 signal.</p>
        <div class="example" data-mc-autonum="&lt;b&gt;Example&lt;/b&gt;"><span class="autonumber"><span><b>Example</b></span></span><a name="AEN6289"></a>
            <p><b>Example 8. Application of the If conditional structure</b>
            </p><pre class="programlisting">SCHEDULE

 ...

 IF C101.ControlSignal &gt; 1.0 THEN
 REASSIGN V101.Position := 1.0 ; END
 ELSE
 IF C101.ControlSignal &lt; 0.0 THEN
 REASSIGN V101.Position := 0.0 ; END
 ELSE
 REASSIGN V101.Position := OLD(C101.ControlSignal) ; END
 END # If
 END # If

 ...</pre>
        </div>
        <p>When using the graphical interface, inserting an If Task will activate the following Task configuration dialog.</p>
        <div class="figure"><a name="AEN6293"></a>
            <div class="mediaobject">
                <p>
                    <img src="../Resources/Images/MDG_ScheduleTab_TaskConfig_If.png" />
                </p>
            </div>
            <p class="FigureCaption"> If Task configuration dialog</p>
        </div>
        <p>Enter a valid logical expression in the text box (e.g. <span class="gPROMSLanguage">C101.ControlSignal &gt; 1.0</span>) and press the <b class="guibutton">OK</b>
      button. gPROMS checks the syntax of the expression and only enables the <b class="guibutton">OK</b> button when it is valid.</p>
        <p>There is no Advanced view of the configuration dialog for the If Task.</p>
        <p>Once a valid expression has been provided, the If Task will be inserted and will look like this:</p>
        <div class="figure"><a name="AEN6306"></a>
            <div class="mediaobject">
                <p>
                    <img src="../Resources/Images/MDG_ScheduleTab_IfNew.png" />
                </p>
            </div>
            <p class="FigureCaption"> A new If Task</p>
        </div>
        <p>Drag new Tasks onto the <code class="methodname">THEN</code> hot spot to provide the operating policy to be performed if the condition is
      <code class="varname">TRUE</code>. The <code class="methodname">ELSE</code> branch contains the <i class="emphasis">optional</i> operating policy when then if condition
 is <code class="varname">FALSE</code>.</p>
        <p>The graphical representation of the example above is shown below.</p>
        <div class="figure"><a name="AEN6320"></a>
            <div class="mediaobject">
                <p>
                    <img src="../Resources/Images/MDG_ScheduleTab_Example_If_lrg.png" />
                </p>
            </div>
            <p class="FigureCaption"> Graphical representation of the If Task</p>
        </div>
        <div>
            <p class="Footer">&#160;</p>
            <p class="Footer">&#160;</p>
            <hr width="100%" size="0" align="center" />
            <p class="Footer">Commercial in confidence</p>
            <p class="Footer">© 2016 Process Systems Enterprise Limited</p>
        </div>
    </body>
</html>