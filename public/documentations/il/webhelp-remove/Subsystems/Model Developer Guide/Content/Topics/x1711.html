<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-gb" xml:lang="en-gb" data-mc-search-type="Stem" data-mc-help-system-file-name="Model Developer Guide.xml" data-mc-path-to-help-system="../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Custom Modelling in gPROMS|Intrinsic gPROMS Functions">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Scalar intrinsic functions</title>
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../Resources/TableStyles/GeneralTable.css" rel="stylesheet" />
        <link href="../Resources/Stylesheets/GeneralStyles.css" rel="stylesheet" />
        <script src="../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../Model Developer Guide.htm#Topics/x1711.html">Open topic with navigation</a>
        </p>
        <div>
            <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix">You are here: </span><a class="MCBreadcrumbsLink" href="Custom Modelling.htm">Custom Modelling in gPROMS</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="c1602.html">Intrinsic gPROMS Functions</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">Scalar intrinsic functions</span>
            </div>
        </div>
        <div class="sect1">
            <h1 class="sect1"><a name="AEN1711"></a>Scalar intrinsic functions</h1>
            <p>All scalar intrinsic functions have the following characteristics:</p>
            <ul>
                <li value="1">
                    <p>they take an arbitrary number of arguments, each representing a scalar or array expression;</p>
                </li>
                <li value="2">
                    <p>they return a scalar result.</p>
                </li>
            </ul>
            <p>The table below lists all scalar functions that are recognised by gPROMS.</p>
            <div class="table"><a name="AEN1720"></a>
                <table style="mc-table-style: url('../Resources/TableStyles/GeneralTable.css');margin-left: auto;margin-right: auto;" class="TableStyle-GeneralTable" cellspacing="0">
                    <caption>Scalar intrinsic functions</caption>
                    <thead>
                        <tr class="TableStyle-GeneralTable-Head-Header1">
                            <th align="center" class="TableStyle-GeneralTable-HeadE-Column1-Header1">Identifier</th>
                            <th align="center" class="TableStyle-GeneralTable-HeadD-Column1-Header1">Function</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="TableStyle-GeneralTable-Body-Body1">
                            <td class="TableStyle-GeneralTable-BodyE-Column1-Body1"><code class="methodname">SIGMA</code>
                            </td>
                            <td class="TableStyle-GeneralTable-BodyD-Column1-Body1">The sum of all elements of all arguments</td>
                        </tr>
                        <tr class="TableStyle-GeneralTable-Body-Body2">
                            <td class="TableStyle-GeneralTable-BodyE-Column1-Body2"><code class="methodname">PRODUCT</code>
                            </td>
                            <td class="TableStyle-GeneralTable-BodyD-Column1-Body2">The product of all elements of all arguments</td>
                        </tr>
                        <tr class="TableStyle-GeneralTable-Body-Body1">
                            <td class="TableStyle-GeneralTable-BodyE-Column1-Body1"><code class="methodname">MIN</code>
                            </td>
                            <td class="TableStyle-GeneralTable-BodyD-Column1-Body1">The smallest of all elements of all arguments</td>
                        </tr>
                        <tr class="TableStyle-GeneralTable-Body-Body2">
                            <td class="TableStyle-GeneralTable-BodyB-Column1-Body2"><code class="methodname">MAX</code>
                            </td>
                            <td class="TableStyle-GeneralTable-BodyA-Column1-Body2">The largest of all elements of all arguments</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <p>The use of scalar intrinsic functions provides a powerful mechanism for writing complex mathematical expressions in gPROMS. However, some
 care is necessary in their use with <a href="x1496.html">array equations</a> written using automatic expansion. Consider, for instance, a
 mixing tank receiving a number of multi-component input streams. The conservation equation for component <i class="emphasis">i</i> can be written
 mathematically as:</p>
            <p><span class="inlinemediaobject"><img src="../Resources/Images/inlineqn_dMidtk1Fkin.png" data-mc-conditions="Default.ScreenOnly" /></span>
            </p>
            <p>In gPROMS, this can be written as:</p><pre class="programlisting">FOR i := 1 TO NoComp DO
 $M(i) = SIGMA(Fin*Xin(1:NoInput,i)) - Fout*X(i) ;
 END</pre>
            <p>Note that the 'alternative' formulation using automatic expansions:</p><pre class="programlisting">$M = SIGMA(Fin*Xin) - Fout*X ;</pre>
            <p>is actually incorrect since:</p>
            <ul>
                <li value="1">
                    <p>the expression <code class="methodname">Fin*Xin</code> violates the <a href="x1359.html">conformance rules for array
 expressions</a>;</p>
                </li>
                <li value="2">
                    <p>the expression <code class="methodname">SIGMA(Fin*Xin)</code> is a scalar, not a vector of length <code class="methodname">NoComp</code>.</p>
                </li>
            </ul>
            <p>A complete model for the mixing tank, illustrating many of the important points highlighted above, is given in the gPROMS code below.</p>
            <div class="example" data-mc-autonum="&lt;b&gt;Example&lt;/b&gt;"><span class="autonumber"><span><b>Example</b></span></span><a name="mixingtank"></a>
                <p><b>Example 1. Multi-component mixing tank Model entity</b>
                </p><pre class="programlisting"># MODEL MixingTank

 PARAMETER
 NoComp, NoInput AS INTEGER
 CrossSectionalArea AS REAL
 Rho AS ARRAY(NoComp) OF REAL
 ValvePosition AS REAL

 VARIABLE
 Fin AS ARRAY(NoInput) OF Flowrate
 Xin AS ARRAY(NoInput,NoComp) OF MassFraction
 Fout AS Flowrate
 X AS ARRAY(NoComp) OF MassFraction
 M AS ARRAY(NoComp) OF Mass
 TotalHoldup AS Mass
 TotalVolume AS Volume
 Height AS Length

 EQUATION

 # Mass balance
 FOR i := 1 TO NoComp DO
 $M(i) = SIGMA(Fin*Xin(,i)) - Fout*X(i) ;
 END

 # Mass fractions
 TotalHoldup = SIGMA(M) ;

 M = X * TotalHoldup ;

 # Calculation of liquid level from holdup
 TotalVolume = SIGMA(M/Density) ;

 TotalVolume = CrossSectionalArea * Height ;

 Fout = ValvePosition * SQRT ( Height ) ;</pre>
            </div>
            <p>As an additional example, the gPROMS code below illustrates the use of nested <code class="methodname">FOR</code> constructs to implement the
 matrix-matrix multiplication operation between matrices A (n × m) and B (m × q), resulting in a matrix C (n × q).</p>
            <div class="example" data-mc-autonum="&lt;b&gt;Example&lt;/b&gt;"><span class="autonumber"><span><b>Example</b></span></span><a name="AEN1774"></a>
                <p><b>Example 2. Matrix multiplication Model entity</b>
                </p><pre class="programlisting"># MODEL MatrixMultiplication

 PARAMETER
 n, m, q AS INTEGER

 VARIABLE
 A AS ARRAY (n, m) OF SomeQuantity
 B AS ARRAY (m, q) OF SomeQuantity
 C AS ARRAY (n, q) OF SomeQuantity

 EQUATION
 FOR i := 1 TO n DO
 FOR j := 1 TO q DO
 C(i,j) = SIGMA(A(i,)*B(,j))
 END
 END</pre>
            </div>
        </div>
        <div>
            <p class="Footer">&#160;</p>
            <p class="Footer">&#160;</p>
            <hr width="100%" size="0" align="center" />
            <p class="Footer">Commercial in confidence</p>
            <p class="Footer">© 2016 Process Systems Enterprise Limited</p>
        </div>
    </body>
</html>