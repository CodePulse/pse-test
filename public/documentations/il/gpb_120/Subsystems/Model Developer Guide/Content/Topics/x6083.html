<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-gb" xml:lang="en-gb" data-mc-search-type="Stem" data-mc-help-system-file-name="Model Developer Guide.xml" data-mc-path-to-help-system="../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Custom Modelling in gPROMS|Defining Schedules|Elementary tasks">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>The Reinitial elementary task</title>
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../Resources/Stylesheets/GeneralStyles.css" rel="stylesheet" />
        <script src="../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../Model Developer Guide.htm#Topics/x6083.html">Open topic with navigation</a>
        </p>
        <div>
            <div class="nocontent">
                <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="5" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                </div>
            </div>
        </div>
        <h1><a name="AEN6083"></a>The Reinitial elementary task</h1>
        <p>Both the Reassign and Replace elementary tasks introduce discontinuities in the simulation. Although these discontinuities may affect the
 values of input and/or algebraic variables, they do not normally affect the values of differential variables. The latter usually represent quantities
 that are conserved according to the laws of physics (e.g. mass, energy, momentum etc.) and are therefore continuous across such discontinuities;
 gPROMS follows this assumption and normally expects the values of the differential variables before the discontinuity to be the same as those just
 after the discontinuity. The Reinitial elementary task makes it possible to introduce discontinuities in the differential variables themselves. Of
 course, once we drop the continuity assumption, we need to provide some other information to replace it.</p>
        <div class="example" data-mc-autonum="&lt;b&gt;Example&lt;/b&gt;"><span class="autonumber"><span><b>Example</b></span></span><a name="AEN6086"></a>
            <p><b>Example 4. Applications of the Reinitial task</b>
            </p><pre class="programlisting">REINITIAL
 PI101.IntegralError
 WITH
 PI101.IntegralError = 0 ;
 END</pre><pre class="programlisting">REINITIAL
 R101.HoldUp(1),
 R101.HoldUp(2)
 WITH
 R101.HoldUp(1) = 2 * OLD(R101.Holdup(1)) ;
 R101.X(2) = 0.3 ;
 END</pre>
        </div>
        <p>Two examples of the application of the <code class="methodname">REINITIAL</code> task are shown in the gPROMS code above. In the first example, the
 integral error of a PI controller is reset to zero. The execution of this task will result in a reinitialisation calculation in which the usual
 assumption concerning the continuity of differential variable <code class="methodname">PI101.IntegralError</code> will be replaced by the equation in the
 second clause of the <code class="methodname">REINITIAL</code> task. The latter simply states that the value of <code class="methodname">PI101.IntegralError</code>
      after the discontinuity is zero. Note that this is a general equation and not just an assignment, which is why we do <i class="emphasis">not</i> write:</p><pre class="programlisting">PI101.IntegralError := 0 ;</pre>
        <p>This is consistent with the treatment of general initial conditions in gPROMS. In the second example, the holdups of components A and B in a
 chemical reactor change by instantaneous additions of material. The amounts added are such that, in the final mixture, the holdup of A is doubled
 while the mass fraction of B is 0.3. Note again that the condition specified is a general equation involving any variables in the problem and not
 just the ones that are reinitialised. Naturally, the number of differential variables in the first clause of a <code class="methodname">REINITIAL</code>
      task must match the number of equations in the second clause.</p>
        <div>
            <p class="Footer">&#160;</p>
            <p class="Footer">&#160;</p>
            <hr width="100%" size="0" align="center" />
            <p class="Footer">Commercial in confidence</p>
            <p class="Footer">Â© 2017 Process Systems Enterprise Limited</p>
        </div>
    </body>
</html>