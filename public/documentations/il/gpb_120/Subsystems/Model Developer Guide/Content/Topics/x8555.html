<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-gb" xml:lang="en-gb" data-mc-search-type="Stem" data-mc-help-system-file-name="Model Developer Guide.xml" data-mc-path-to-help-system="../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Custom Modelling in gPROMS|Model Analysis and Diagnosis|High-index DAE systems">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Automatic index reduction in gPROMS</title>
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../Resources/Stylesheets/GeneralStyles.css" rel="stylesheet" />
        <script src="../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../Model Developer Guide.htm#Topics/x8555.html">Open topic with navigation</a>
        </p>
        <div>
            <div class="nocontent">
                <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="5" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                </div>
            </div>
        </div>
        <h1><a name="MDG_Diag_HighIndex_AutoIndexReduction"></a>Automatic index reduction in gPROMS</h1>
        <p>gPROMS is able to reduce the index of problems automatically. However, it initially reports problems of high index and informs the user
 how to turn on index reduction. Index reduction is off by default because it is usually better to develop index-1 models rather than rely on
 gPROMS to reduce the index automatically, since the index reduction techniques can be quite computationally intensive.</p>
        <p>To illustrate automatic index reduction, consider the following model of a heater.</p><pre class="programlisting">EQUATION
 $HoldUp = Fin - Fout ;
 $U = Fin*hin - Fout*h + Q ;
 U = Holdup*h - P*TotalVolume ;
 P * TotalVolume = Holdup * R * T ;
 Fout = alpha * Holdup ;
 h = hr + Cp*(T - Tr) ;
 hin = hr + Cp*(Tin - Tr) ;</pre>
        <p>When the following process is executed, gPROMS can solve the problem with no difficulty.</p><pre class="programlisting">UNIT
 T101 AS Heater

 SET
 WITHIN T101 DO
 Cp := 1.121 * 28.013 ;
 hr := 0.0 ;
 Tr := 298.15 ;
 R := 0.082 ;
 alpha := 1 ;
 END

 ASSIGN
 WITHIN T101 DO
 Fin := 10 ;
 Tin := 600 ;
 P := 5 ;
 Q := 10 ;
 END

 INITIAL
 WITHIN T101 DO
 HoldUp = 0.5 ;
 TotalVolume = 4 ;
 END</pre>
        <p>However, if we replace the Assignment of Q with one on T:</p><pre class="programlisting">ASSIGN
 WITHIN T101 DO
 Fin := 10 ;
 Tin := 600 ;
 P := 5 ;
 T := 487.8049 ;
 END

 INITIAL
 WITHIN T101 DO
 HoldUp = 0.5 ;
 TotalVolume = 4 ;
 END</pre>
        <p>we will get a high-index problem (see the <a href="x8484.html">Heater Example</a>) and gPROMS will give the following
 output.</p>
        <div class="figure"><a name="AEN8566"></a>
            <div class="mediaobject">
                <p>
                    <img src="../Resources/Images/HiIndexReport1.png" />
                </p>
            </div>
            <p class="FigureCaption"> gPROMS diagnostics for a high-index problem</p>
        </div>
        <p>Click on the "+" symbol to see which initial condition should be removed:</p>
        <div class="figure"><a name="AEN8574"></a>
            <div class="mediaobject">
                <p>
                    <img src="../Resources/Images/HiIndexReport1.1.png" />
                </p>
            </div>
            <p class="FigureCaption"> The initial condition that needs to be removed</p>
        </div>
        <p>Now, by removing this initial condition, gPROMS reports that the correct number of conditions are specified but that the index of the
 system is 2 and cannot be solved directly.</p>
        <div class="figure"><a name="AEN8582"></a>
            <div class="mediaobject">
                <p>
                    <img src="../Resources/Images/HiIndexReport2.png" />
                </p>
            </div>
            <p class="FigureCaption"> gPROMS diagnostics for a high-index problem</p>
        </div>
        <p>To enable the automatic index reduction, copy the suggested Solution Parameter into the Process as below.</p><pre class="programlisting">ASSIGN
 WITHIN T101 DO
 Fin := 10 ;
 Tin := 600 ;
 P := 5 ;
 T := 487.8049 ;
 END

 INITIAL
 WITHIN T101 DO
 HoldUp = 0.5 ;
 END

 SOLUTIONPARAMETERS
 IndexReduction := ON ;</pre>
        <p>Now, with index reduction enabled, gPROMS is able to reduce the problem to index 1 and solve it. The replacements made during the
 reduction are shown in the output:</p>
        <div class="figure"><a name="AEN8592"></a>
            <div class="mediaobject">
                <p>
                    <img src="../Resources/Images/HiIndexReport3_allinone.png" />
                </p>
            </div>
            <p class="FigureCaption"> gPROMS output after automatic index reduction</p>
        </div>
        <p>After giving the above output, gPROMS continues to integrate the model as normal, since the index has now been reduced to 1.</p>
        <p>The above example can be found in the gPROMS Project <tt class="filename">highindex_N2_heater.gPJ</tt> in the examples subdirectory. Please
 note that in the Project two Processes are present: one which specifies the temperature T as in the explanation above. In the other Process,
      <code class="varname">Specify_Q</code>, the heat load is specified rather than the temperature. This specification has been chose to demonstrate that the
 index does not only depend on the equations but also on the chosen degrees of freedom. A more detailed explanation is given in the <a href="x10780.html">mathematical analysis of the heater model</a>.</p>
        <div>
            <p class="Footer">&#160;</p>
            <p class="Footer">&#160;</p>
            <hr width="100%" size="0" align="center" />
            <p class="Footer">Commercial in confidence</p>
            <p class="Footer">Â© 2017 Process Systems Enterprise Limited</p>
        </div>
    </body>
</html>