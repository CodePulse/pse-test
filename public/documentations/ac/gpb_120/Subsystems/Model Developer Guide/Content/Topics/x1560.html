<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-gb" xml:lang="en-gb" data-mc-search-type="Stem" data-mc-help-system-file-name="Model Developer Guide.xml" data-mc-path-to-help-system="../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Custom Modelling in gPROMS|Arrays|Using arrays in equations">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Writing explicit array equations using the FOR construct</title>
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../Resources/Stylesheets/GeneralStyles.css" rel="stylesheet" />
        <script src="../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../Model Developer Guide.htm#Topics/x1560.html">Open topic with navigation</a>
        </p>
        <div>
            <div class="nocontent">
                <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="5" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                </div>
            </div>
        </div>
        <h1><a name="theforconstruct"></a>Writing explicit array equations using the FOR construct</h1>
        <p>We have seen how array equations can be written in an implicit manner by exploiting the array expression capability of gPROMS. An
 alternative is to write array equations explicitly using a FOR construct that is similar to that provided by most high-level programming
 languages. Thus, consider the equation describing the conservation of component <i class="emphasis">i</i> in a multi-component buffer tank. This
 can be written mathematically as:</p>
        <p><span class="inlinemediaobject"><img src="../Resources/Images/inlineqn_conscomp.png" data-mc-conditions="Default.ScreenOnly" /></span>
        </p>
        <p>In gPROMS, this can be written in two completely equivalent ways, namely implicitly, in the form:</p><pre class="programlisting">$M = Fin*Xin - Fout*X ;</pre>
        <p>or explicitly, in the form:</p><pre class="programlisting">FOR i := 1 TO NoComp DO
 $M(i) = Fin*Xin(i) - Fout*X(i) ;
 END</pre>
        <p>The above are completely equivalent: which one you use depends entirely on your preference. However, situations do exist in which the
 required equations cannot be described via implicit declaration, and the use of explicit FOR constructs is essential.</p>
        <p>The counter of a FOR construct (e.g. <code class="methodname">i</code> in the above example) is an integer quantity that may be referenced only
 by equations enclosed within the construct. The range of this counter must be specified in terms of any arithmetic expressions involving integer
 constants, integer Parameters and/or integer arithmetic operators. Moreover, a step increment may be specified. For instance,</p><pre class="programlisting">FOR i := NoComp+1 TO 2*NoComp STEP 2 DO
 ...
 END</pre>
        <p>will start by assign <code class="methodname">i</code> a values of <code class="methodname">NoComp+1</code> and then will increment it by 2 until it
 exceeds <code class="methodname">2*NoComp</code>. If no increment is specified, its value defaults to 1. A FOR construct may enclose an arbitrary
 number of equations of any type -- including other For constructs. This allows nesting of For constructs to arbitrary depth; in such
 cases:</p>
        <ul>
            <li value="1">
                <p>each FOR construct must use a different name for its counter variable;</p>
            </li>
            <li value="2">
                <p>any expression that appears within each For construct (including those defining its range and increment) may involve the counters of
 any enclosing For constructs.</p>
            </li>
        </ul>
        <div>
            <p class="Footer">&#160;</p>
            <p class="Footer">&#160;</p>
            <hr width="100%" size="0" align="center" />
            <p class="Footer">Commercial in confidence</p>
            <p class="Footer">Â© 2017 Process Systems Enterprise Limited</p>
        </div>
    </body>
</html>