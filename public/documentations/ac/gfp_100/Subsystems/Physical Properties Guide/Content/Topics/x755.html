<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-gb" xml:lang="en-gb" data-mc-search-type="Stem" data-mc-help-system-file-name="Physical Properties Guide.xml" data-mc-path-to-help-system="../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Physical Properties|Using Physical Properties for Simple Materials">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Incorporating physical properties in Models</title>
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../Resources/Stylesheets/GeneralStyles.css" rel="stylesheet" />
        <script src="../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../Physical Properties Guide.htm#Topics/x755.html">Open topic with navigation</a>
        </p>
        <div>
            <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix">You are here: </span><a class="MCBreadcrumbsLink" href="c251.html">Physical Properties</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="c257.html">Using Physical Properties for Simple Materials</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">Incorporating physical properties in Models</span>
            </div>
        </div>
        <h1><a name="incorporatingphysicalpropertiesinmodels"></a>Incorporating physical properties in Models</h1>
        <p>External physical property packages are interfaced to gPROMS as Foreign
 Objects. The usage of physical property Foreign Objects in Models is governed by a set of simple rules:</p>
        <ol type="A">
            <li value="1">
                <p>Each distinct Physical Property Foreign Object used by a Model is declared as a Parameter of type FOREIGN_OBJECT. The latter keyword is
 normally followed by the <i class="emphasis">class </i>of the Foreign Object (see also: Classes and instances of Foreign Objects) which identifies the external physical properties software that will be
 used to implement this instance of the Foreign Object. For example, a typical declaration would be:</p><pre class="programlisting">PARAMETER PPP AS FOREIGN_OBJECT "Multiflash"</pre>
                <p>This simply states that:</p>
                <ul>
                    <li value="1">
                        <p>Model Flash will make use of a Physical Property Foreign Object.</p>
                    </li>
                    <li value="2">
                        <p>Whenever necessary within this Model (see below), the Foreign Object will be referred to as PPP.</p>
                    </li>
                    <li value="3">
                        <p>PPP is implemented by a piece of external software (in this case, a physical property package) called Multiflash. Thus, PPP is an
 "instance'' of Multiflash.</p>
                    </li>
                </ul>
                <p>One important thing to note is that the class of the Foreign Object must be enclosed in quotes ("Multiflash"). This is because it is neither
 a gPROMS keyword nor an identifier that has previously been defined in the gPROMS input file.</p>
            </li>
            <li value="2">
                <p>The standard way of referring to physical property calculations within the Model is as follows:</p>
                <ul>
                    <li value="1">
                        <p>for constant properties (mainly those relating to pure components properties such as molecular weights):</p><pre class="programlisting">ForeignObjectName.PhysicalProperty</pre>
                    </li>
                    <li value="2">
                        <p>for variable physical properties:</p><pre class="programlisting">ForeignObjectName.PhysicalProperty(InputList)</pre>
                    </li>
                </ul>
                <p>PhysicalProperty is one of those listed in the first column of the tables in: <a href="x280.html">The set of
 physical properties supported by gPROMS</a> while the InputList list is as given in the second column.</p>
            </li>
            <li value="3">
                <p>Each input of a physical property is a scalar or vector-valued variable or expression.</p>
            </li>
            <li value="4">
                <p>Each property returns a single scalar or vector-valued quantity. The latter may be of type integer, logical or real. A method may be used
 anywhere in the Model where an expression of the corresponding dimensionality and type is allowed.</p>
            </li>
        </ol>
        <p>An example of a Model making use of a physical properties package is shown in the listing below.<a href="javascript:void(0);" class="MCTextPopup popup popupHead" style="font-size: 0.9em; vertical-align: super">1<span class="MCTextPopupBody MCTextPopupBody_Closed needs-pie popupBody"><span class="MCTextPopupArrow"></span>Note that the line numbers shown in the figures have been included for ease of reference in this document and are not part of the gPROMS
 language.</span></a></p><pre class="programlisting">1 # model entity "Flash"
 
 2 PARAMETER
 3 PPP AS FOREIGN_OBJECT "Multiflash"
 4 NoComp AS INTEGER
 5 Mw AS ARRAY(NoComp) OF REAL
 
 6 VARIABLE
 7 F, L, V AS MolarRate
 8 Hf AS MolarEnergy
 9 Q AS EnergyRate
10 T AS Temperature
11 P AS Pressure
12 x, y, z AS ARRAY(NoComp) OF MoleFraction
 
13 SET
14 NoComp := PPP.NumberOfComponents ;
15 Mw := PPP.MolecularWeight ;
 
16 EQUATION
17 F*z = L*x + V*y ;
18 F*Hf = PPP.LiquidEnthalpy(T,P,L*x) + PPP.VapourEnthalpy(T,P,V*y) + Q ;
19 x*PPP.LiquidFugacityCoefficient(T,P,x) = 
20 y*PPP.VapourFugacityCoefficient(T,P,y) ;
21 SIGMA(x) = SIGMA(y) = 1 ;
22 ...</pre>
        <p>As we have already seen, line 3 specifies that the Model Flash makes use of a Foreign Object of type Multiflash, corresponding to a software
 package that is external to gPROMS. For the purposes of defining this Model, this Foreign Object will be called PPP.</p>
        <p>Physical property methods are used in several places within the Model. For example:</p>
        <ul>
            <li value="1">
                <p>At line 14, we make use of the scalar integer method NumberOfComponents to Set the value of the integer parameter NoComp.</p>
            </li>
            <li value="2">
                <p>At line 15, we make use of the vector real method MolecularWeight to Set the value of the real array parameter Mw.</p>
            </li>
            <li value="3">
                <p>At line 18, we invoke the methods LiquidEnthalpy and VapourEnthalpy to compute the (total) enthalpies of the liquid and vapour product
 streams respectively.</p>
            </li>
            <li value="4">
                <p>At line 19 and 20, we invoke two more methods, namely LiquidFugacityCoefficient and VapourFugacityCoefficient respectively to compute
        <i class="emphasis">arrays</i> of liquid and vapour phase fugacity coefficients.</p>
            </li>
        </ul>
        <p>It is worth emphasising that method inputs can be expressions rather than simple variables. One example has already been seen at line 18 of the
 above flash model. A second example is shown below where a liquid phase viscosity is evaluated at the mean of the inlet and exit conditions of a
 particular unit:</p><pre class="programlisting">PPP.LiquidViscosity((Tin+T)/2, (Pin+P)/2, (xin+x)/2)</pre>
        <p>Finally, no direct reference can be made to an element of a vector-valued method. For instance, it is not possible to access directly the
    <i class="emphasis">i<sup>th</sup></i> element of the vector of liquid fugacity coefficients returned by method LiquidFugacityCoefficient
 (see line 17 of the listing above). If such access is desired, an equation defining a vector-valued variable as being equal to the method result must
 first be introduced, e.g.:</p><pre class="programlisting">LFC = PPP.LiquidFugacityCoefficient(T,P,x) ;</pre>
        <p>Other equations can then refer to individual elements of the variable LFC as desired.</p>
        <p><i class="emphasis">CAUTION!</i>
        </p>
        <p>It is the model developer's responsibility to check the type (including the correct units of the inputs) and the order of the arguments for each
 physical property invocation. The current version of gPROMS will perform only a minimal check on these.</p>
        <div>
            <p class="Footer">&#160;</p>
            <p class="Footer">&#160;</p>
            <hr width="100%" size="0" align="center" />
            <p class="Footer">Commercial in confidence</p>
            <p class="Footer">Â© 2017 Process Systems Enterprise Limited</p>
        </div>
    </body>
</html>